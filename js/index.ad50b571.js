(function(e){function t(t){for(var r,o,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)o=c[l],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);p&&p(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={index:0},i={index:0},a=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-02369729":"410ee679","chunk-04ff498c":"0b0ee874","chunk-0f90a0b9":"ba7ee3b6","chunk-3d632dd4":"5b56318f","chunk-634406c7":"f3030190","chunk-1289583f":"c09b582d","chunk-128bcd3a":"67de6ce6","chunk-156bda74":"2119f793","chunk-15f6d74c":"8cca673e","chunk-1deb14ae":"1e824294","chunk-22d6a12a":"bd3d71dc","chunk-2d0af8f9":"1c60dc95","chunk-2d0b28ce":"68c77f1c","chunk-2d0c0865":"d1354448","chunk-2d0c774c":"c73b5feb","chunk-2d0e523c":"62a1ac27","chunk-2d0f0a01":"37596018","chunk-2d20fcf8":"66d59ba8","chunk-2d216368":"0839128d","chunk-2d21e38b":"792b6049","chunk-2d21f0e8":"a28ec2a9","chunk-2d222cd9":"8b035143","chunk-2d22ca70":"06ba8cfb","chunk-2d237af5":"6fddb1e1","chunk-2d66ce56":"7202e707","chunk-2e1cc841":"ebb6030d","chunk-3227a1e3":"fd77975b","chunk-3f4bec47":"16399362","chunk-41d491cc":"149f18ea","chunk-44f504b3":"bba65e58","chunk-495f4d85":"adaa42cf","chunk-4ab05380":"32eb77ec","chunk-4ba2afd8":"7218788c","chunk-4f5767fb":"7fc8ee51","chunk-552d72e2":"b8202e79","chunk-5901aad5":"2d708d06","chunk-5ed4b251":"de482227","chunk-65270408":"44341cd3","chunk-66c5b398":"f922a66b","chunk-7f9edd4b":"111c6006","chunk-957fad70":"c4515741","chunk-b891c0ba":"3725930e","chunk-b93ff1ac":"e4463cf9","chunk-de3e9c28":"de32676f","chunk-fefab9e0":"a5526f0f"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-02369729":1,"chunk-04ff498c":1,"chunk-0f90a0b9":1,"chunk-1289583f":1,"chunk-128bcd3a":1,"chunk-156bda74":1,"chunk-15f6d74c":1,"chunk-1deb14ae":1,"chunk-22d6a12a":1,"chunk-2d66ce56":1,"chunk-2e1cc841":1,"chunk-3227a1e3":1,"chunk-41d491cc":1,"chunk-4ab05380":1,"chunk-4f5767fb":1,"chunk-552d72e2":1,"chunk-5ed4b251":1,"chunk-65270408":1,"chunk-66c5b398":1,"chunk-957fad70":1,"chunk-b891c0ba":1,"chunk-b93ff1ac":1,"chunk-de3e9c28":1,"chunk-fefab9e0":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-02369729":"bfd1eee3","chunk-04ff498c":"84033741","chunk-0f90a0b9":"188e04d6","chunk-3d632dd4":"31d6cfe0","chunk-634406c7":"31d6cfe0","chunk-1289583f":"a9c5d4ea","chunk-128bcd3a":"d069689d","chunk-156bda74":"f3d84f5c","chunk-15f6d74c":"f309c7c8","chunk-1deb14ae":"297e12bd","chunk-22d6a12a":"a7db46c9","chunk-2d0af8f9":"31d6cfe0","chunk-2d0b28ce":"31d6cfe0","chunk-2d0c0865":"31d6cfe0","chunk-2d0c774c":"31d6cfe0","chunk-2d0e523c":"31d6cfe0","chunk-2d0f0a01":"31d6cfe0","chunk-2d20fcf8":"31d6cfe0","chunk-2d216368":"31d6cfe0","chunk-2d21e38b":"31d6cfe0","chunk-2d21f0e8":"31d6cfe0","chunk-2d222cd9":"31d6cfe0","chunk-2d22ca70":"31d6cfe0","chunk-2d237af5":"31d6cfe0","chunk-2d66ce56":"74133569","chunk-2e1cc841":"dabf2b04","chunk-3227a1e3":"693b10e6","chunk-3f4bec47":"31d6cfe0","chunk-41d491cc":"661c377f","chunk-44f504b3":"31d6cfe0","chunk-495f4d85":"31d6cfe0","chunk-4ab05380":"8666cc78","chunk-4ba2afd8":"31d6cfe0","chunk-4f5767fb":"a04fd539","chunk-552d72e2":"5e62c45a","chunk-5901aad5":"31d6cfe0","chunk-5ed4b251":"e8538f41","chunk-65270408":"7be05cee","chunk-66c5b398":"77e697b8","chunk-7f9edd4b":"31d6cfe0","chunk-957fad70":"ee068850","chunk-b891c0ba":"8009960b","chunk-b93ff1ac":"55b52384","chunk-de3e9c28":"f38827ed","chunk-fefab9e0":"dc0511f5"}[e]+".css",i=s.p+r,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var u=a[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===i))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===r||l===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete o[e],p.parentNode.removeChild(p),n(a)},p.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){o[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=a);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,n[1](d)}i[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/phi-demo/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=l;a.push([0,"chunk-vendors","chunk-common"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"163f":function(e,t,n){},2048:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"CmsBlockComponent",class:{"--error":!!e.error}},[e.isReady?n(e.name,e._g(e._b({ref:"innerComponent",tag:"component",class:e.componentClass,on:{"hook:mounted":e.onComponentMounted}},"component",e.$attrs,!1),e.$listeners),[e._t("default")],2):e._e(),e.isReady||e.error?e._e():n("span",[e._v("... "+e._s(e.name)+" ...")]),e.error?n("span",[e._v(" '"+e._s(e.name)+"' error: "),n("span",[e._v(e._s(e.error))])]):e._e()],1)},o=[],i=n("53ca"),a=n("1da1"),c=(n("96cf"),n("b0c0"),{name:"CmsBlockComponent",props:{name:{type:[String,Object,Function],required:!0},componentClass:{type:String,required:!1,default:null}},data:function(){return{isComponentLoaded:!1,error:null,library:null}},computed:{isReady:function(){return this.isComponentLoaded}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("object"!=Object(i["a"])(e.name)&&"function"!=typeof e.name){t.next=3;break}return e.isComponentLoaded=!0,t.abrupt("return");case 3:case"end":return t.stop()}}),t)})))()},methods:{onComponentMounted:function(){this.$emit("block:mounted",this.$refs.innerComponent)}}}),s=c,u=(n("b483"),n("2877")),l=Object(u["a"])(s,r,o,!1,null,null,null);t["a"]=l.exports},"22cd":function(e,t,n){},"2a57":function(e,t,n){"use strict";n("c9ab")},"2d7b":function(e,t,n){},3137:function(e,t,n){"use strict";n("2d7b")},"3d2b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cms-editor-layout",class:{"--open":!!e.isWindowOpen}},[n("div",{staticClass:"toolbar-container"},[n("div",{staticClass:"block-editor-toolbar ui-toolbar"},[n("UiIcon",{staticClass:"ui-clickable toolbar-icon block-drag-handle",staticStyle:{cursor:"grab"},attrs:{value:"mdi:cursor-move"}}),n("div",{staticClass:"slot-toolbar ui-group"},[e._t("toolbar")],2),n("UiIcon",{staticClass:"ui-clickable toolbar-icon toolbar-icon-visibility",class:{"--enabled":!!e.value["v-if"]},attrs:{title:"Visibilidad",value:e.value["v-if"]?"mdi:eye":"mdi:eye-outline"},on:{click:function(t){return e.openWindow("visibility")}}}),n("UiIcon",{staticClass:"ui-clickable toolbar-icon toolbar-icon-settings",attrs:{title:"Opciones",value:"mdi:cog"},on:{click:function(t){return e.openWindow()}}}),n("UiIcon",{staticClass:"ui-clickable toolbar-icon toolbar-icon-delete",attrs:{title:"Eliminar",value:"mdi:delete"},on:{click:e.onClickDelete}})],1)]),n("div",{staticClass:"block-editor-body theme-block"},[e._t("default")],2),n("UiWindow",{attrs:{open:e.isWindowOpen,text:e.definition?e.definition.title:e.value.component,icon:e.definition?e.definition.icon:null},on:{close:function(t){return e.$emit("cancel",t)}},scopedSlots:e._u([{key:"contents",fn:function(){return[n("BlockEditorActions",{attrs:{"current-action":e.currentAction,value:e.value},on:{"update:currentAction":function(t){e.currentAction=t},"update:current-action":function(t){e.currentAction=t},input:function(t){return e.$emit("input",t)}}})]},proxy:!0},{key:"footer",fn:function(){return[n("button",{staticClass:"ui-button --cancel",attrs:{type:"button"},on:{click:function(t){e.$emit("cancel",t),e.isWindowOpen=!1}}},[e._v("Cancelar")]),n("button",{staticClass:"ui-button --main",attrs:{type:"button"},on:{click:function(t){e.$emit("accept",t),e.isWindowOpen=!1}}},[e._v("Aceptar")])]},proxy:!0}])})],1)},o=[],i=n("fa30"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"block-editor-actions"},[n("UiTabs",{attrs:{"container-class":"tab-contents"},on:{input:function(t){return e.$emit("update:current-action",e.currentTab)}},scopedSlots:e._u([e._l(e.actions,(function(t,r){return{key:"content-actiontab_"+r,fn:function(){return[n("BlockEditorComponent",{key:r,attrs:{definition:t,page:e.page},on:{input:e.emitInput},model:{value:e.block,callback:function(t){e.block=t},expression:"block"}})]},proxy:!0}})),{key:"content-visibility",fn:function(){return[n("VmExpression",{attrs:{schema:e.CmsPageRoot.schema},model:{value:e.blockIf,callback:function(t){e.blockIf=t},expression:"blockIf"}})]},proxy:!0},{key:"content-events",fn:function(){return[n("BlockListenersEditor",{on:{input:e.emitInput},model:{value:e.block["v-on"],callback:function(t){e.$set(e.block,"v-on",t)},expression:"block['v-on']"}})]},proxy:!0},{key:"content-repeat",fn:function(){return[n("UiField",{attrs:{label:"Variable",message:"Nombre de variable"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.block["v-model"],expression:"block['v-model']"}],staticClass:"ui-native",attrs:{type:"text"},domProps:{value:e.block["v-model"]},on:{input:[function(t){t.target.composing||e.$set(e.block,"v-model",t.target.value)},e.emitInput]}})]),n("UiField",{attrs:{label:"Referencia",message:"Nombre de referencia del componente interno"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.block.ref,expression:"block.ref"}],staticClass:"ui-native",attrs:{type:"text"},domProps:{value:e.block.ref},on:{input:[function(t){t.target.composing||e.$set(e.block,"ref",t.target.value)},e.emitInput]}})]),n("UiField",{attrs:{label:"Repetir",message:"Crear una iteracion de este bloque por cada elemento de la variable"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.block["v-for"],expression:"block['v-for']"}],staticClass:"ui-native",attrs:{type:"text"},domProps:{value:e.block["v-for"]},on:{input:[function(t){t.target.composing||e.$set(e.block,"v-for",t.target.value)},e.emitInput]}})])]},proxy:!0},{key:"content-styles",fn:function(){return[n("UiInputJson",{on:{input:e.emitInput},model:{value:e.block.props.style,callback:function(t){e.$set(e.block.props,"style",t)},expression:"block.props.style"}})]},proxy:!0},{key:"content-advanced",fn:function(){return[n("UiInputJson",{on:{input:e.emitInput},model:{value:e.block,callback:function(t){e.block=t},expression:"block"}})]},proxy:!0}],null,!0),model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[e._l(e.actions,(function(t,r){return n("UiTab",{key:r,attrs:{text:t.title,value:"actiontab_"+r,icon:t.icon||(e.definition?e.definition.icon:"")}})})),n("UiTab",{attrs:{text:"Visibilidad",value:"visibility",icon:e.block["v-if"]?"mdi:eye":"mdi:eye-outline"}}),n("UiTab",{attrs:{text:"Eventos",value:"events",icon:"mdi:source-fork"}}),n("UiTab",{attrs:{text:"Datos",value:"repeat",icon:"mdi:variable"}}),n("UiTab",{attrs:{icon:"mdi:palette",text:"Estilos",value:"styles"}}),e.showAdvancedEditorAction?n("UiTab",{attrs:{icon:"mdi:code-json",text:"Editor avanzado",value:"advanced"}}):e._e()],2)],1)},c=[],s=n("1da1"),u=(n("96cf"),n("e42c")),l=n("5378"),d=n("108b"),p=n("f24c"),f=n("3e69"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cms-validation-editor"},[e._l(e.innerValue,(function(t,r){return n("div",{key:r,staticClass:"ui-row --tight --top"},[n("ui-data-drawer",{on:{input:e.emitInput},scopedSlots:e._u([{key:"trigger",fn:function(){return[n("ui-item",e._b({staticClass:"ui-clickable"},"ui-item",t,!1))]},proxy:!0},{key:"contents",fn:function(e){var t=e.innerModel,r=e.setModel;return[n("rule-editor",{attrs:{value:t},on:{input:r}})]}}],null,!0),model:{value:e.innerValue[r],callback:function(t){e.$set(e.innerValue,r,t)},expression:"innerValue[i]"}}),n("ui-icon",{staticClass:"ui-clickable",attrs:{value:"mdi:close"},on:{click:function(t){return e.removeRule(r)}}})],1)})),n("ui-data-drawer",{on:{input:e.addRule},scopedSlots:e._u([{key:"trigger",fn:function(){return[n("ui-item",{staticClass:"ui-clickable",attrs:{icon:"mdi:plus",text:"Agregar condición"}})]},proxy:!0},{key:"contents",fn:function(e){var t=e.setModel;return[n("rule-editor",{on:{input:t}})]}}])})],2)},h=[],b=(n("a434"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cms-validation-rule-editor"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.innerValue.text,expression:"innerValue.text"}],staticClass:"ui-native rule-text",attrs:{type:"text"},domProps:{value:e.innerValue.text},on:{input:[function(t){t.target.composing||e.$set(e.innerValue,"text",t.target.value)},e.emitInput]}}),n("UiConditionEditor",{on:{input:e.emitInput},model:{value:e.innerValue.rule,callback:function(t){e.$set(e.innerValue,"rule",t)},expression:"innerValue.rule"}})],1)}),v=[],g={name:"cms-validation-rule-editor",components:{UiConditionEditor:i["a"]},props:{value:{type:Object,required:!1,default:null}},data:function(){return{innerValue:{}}},watch:{value:{immediate:!0,handler:function(e){this.innerValue=this.sanitizeRule(e)}}},methods:{sanitizeRule:function(e){var t=e?JSON.parse(JSON.stringify(e)):{};return Object.assign({text:null,rule:null},t)},emitInput:function(){this.$emit("input",JSON.parse(JSON.stringify(this.innerValue)))}}},k=g,y=(n("2a57"),n("2877")),x=Object(y["a"])(k,b,v,!1,null,null,null),w=x.exports,C={name:"cms-validation-editor",components:{UiItem:i["q"],UiIcon:i["m"],RuleEditor:w,UiDataDrawer:i["c"]},props:{value:{type:Array,required:!1,default:null}},data:function(){return{innerValue:[]}},watch:{value:{immediate:!0,handler:function(e){this.innerValue=this.sanitizeRules(e)}}},methods:{addRule:function(e){this.innerValue.push(e),this.emitInput()},removeRule:function(e){this.innerValue.splice(e,1),this.emitInput()},sanitizeRules:function(e){return Array.isArray(e)?JSON.parse(JSON.stringify(e)):[]},emitInput:function(){this.$emit("input",JSON.parse(JSON.stringify(this.innerValue)))}}},O=C,j=Object(y["a"])(O,m,h,!1,null,null,null),S=j.exports,I={name:"BlockEditorActions",inject:["CmsPageRoot"],mixins:[u["a"]],components:{UiConditionEditor:l["a"],UiField:l["f"],UiInputJson:l["o"],UiTab:l["t"],UiTabs:l["u"],VmExpression:d["a"],BlockListenersEditor:p["a"],BlockEditorComponent:f["a"],ValidationEditor:S},props:{value:{type:Object,required:!0},page:{type:Object,required:!1,default:function(){return{}}},currentAction:{type:String,required:!1,default:null}},data:function(){return{block:null,definition:null,currentTab:null}},watch:{currentAction:{handler:function(e){this.currentTab=e,this.currentTab||(this.currentTab=this.actions.length?"actiontab_0":"visibility",this.$emit("update:current-action",this.currentTab))}},value:{immediate:!0,handler:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.block=e,n.next=3,t.$cms.getDefinition(t.block);case 3:t.definition=n.sent,t.currentAction||(t.currentTab=t.actions.length?"actiontab_0":"visibility",t.$emit("update:current-action",t.currentTab));case 5:case"end":return n.stop()}}),n)})))()}}},computed:{blockIf:{get:function(){return this.block&&this.block["v-if"]?this.block["v-if"]:{or:[]}},set:function(e){!e||Array.isArray(e.or)&&!e.or.length||Array.isArray(e.and)&&!e.and.length?this.block["v-if"]=null:this.block["v-if"]=e,this.emitInput()}},actions:function(){return this.definition&&this.definition.editor&&this.definition.editor.actions?this.definition.editor.actions:[]},showAdvancedEditorAction:function(){return!0}},methods:{emitInput:function(){this.block&&this.block.component&&this.$emit("input",this.block)}}},_=I,R=(n("e58d"),Object(y["a"])(_,a,c,!1,null,null,null)),A=R.exports,E={name:"EditorLayout",components:{BlockEditorActions:A,UiWindow:i["w"],UiIcon:i["m"]},props:{value:{type:Object,required:!0},definition:{type:Object,required:!1,default:null}},watch:{value:{immediate:!0,handler:function(e){this.stagedValue=JSON.parse(JSON.stringify(e))}}},data:function(){return{stagedValue:null,currentAction:null,isWindowOpen:!1}},methods:{openWindow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.currentAction=e,this.isWindowOpen=!0},accept:function(){this.$emit("input",JSON.parse(JSON.stringify(this.stagedValue))),this.$emit("accept")},cancel:function(){this.stagedValue=JSON.parse(JSON.stringify(this.value)),this.$emit("cancel")},onClickDelete:function(){this.$emit("delete")}}},P=E,$=(n("5d3e"),Object(y["a"])(P,r,o,!1,null,null,null));t["a"]=$.exports},"3e69":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.definition.component,e._g(e._b({tag:"component",model:{value:e.computedModel,callback:function(t){e.computedModel=t},expression:"computedModel"}},"component",e.blockProps,!1),e.computedListeners))},o=[],i=n("40f1"),a={name:"cms-block-editor-component",inject:{cmsSettings:{default:null}},props:{definition:{type:Object,required:!0},value:{type:Object,required:!0},page:{type:Object,required:!1,default:function(){return{}}}},data:function(){return{block:null,options:{},interpolableData:null}},watch:{value:{immediate:!0,deep:!0,handler:function(e){this.block=JSON.parse(JSON.stringify(e)),this.interpolableData={block:this.block,page:this.page,$settings:this.cmsSettings&&this.cmsSettings[this.block.component]?this.cmsSettings[this.block.component]:null}}}},computed:{blockProps:function(){return Object(i["c"])(this.definition.props,this.interpolableData)},computedModel:{get:function(){return this.definition["v-model"]?Object(i["b"])(this.interpolableData,this.definition["v-model"]):this.block},set:function(e){this.definition["v-model"]?(Object(i["d"])(this.interpolableData,this.definition["v-model"],e),this.block=this.interpolableData.block):this.block=Object.assign({},this.block,e),this.$emit("input",JSON.parse(JSON.stringify(this.block)))}},computedListeners:function(){return Object.assign({},this.$listeners,{input:void 0})}}},c=a,s=n("2877"),u=Object(s["a"])(c,r,o,!1,null,null,null);t["a"]=u.exports},"40f1":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return d}));var r=n("53ca"),o=n("1da1"),i=(n("96cf"),n("8d57")),a=function(e,t){return c.apply(this,arguments)};function c(){return c=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&"object"==Object(r["a"])(t)&&t.action){e.next=2;break}throw{message:"cms/functions/execute: Invalid action",object:t};case 2:return e.next=4,i["a"].getActionDefinition(t.action);case 4:if(o=e.sent,o){e.next=7;break}throw{message:"cms/functions/execute: Could not determine action",object:t};case 7:if("function"!=typeof o){e.next=9;break}return e.abrupt("return",o.bind(n)(t.arguments));case 9:if("function"!=typeof o.handler){e.next=11;break}return e.abrupt("return",o.handler.bind(n)(t.arguments));case 11:throw{message:"cms/functions/execute: No handler found in action",object:t,definition:o};case 12:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}n("3ca3"),n("ddb0"),n("159b"),n("d3b7"),n("161b");n("d81d"),n("ac1f"),n("498a"),n("1276"),n("5319"),n("4d63"),n("25f0");function s(e,t){if(e&&t){var n=t,o=e;n=n.replace(/\[(\w+)\]/g,".$1"),n=n.replace(/^\./,"");for(var i=n.split("."),a=0,c=i.length;a<c;++a){if("object"!=Object(r["a"])(o)||null===o)return;var s=i[a];if(!(s in o))return;o=o[s]}return o}}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return e;if("{{}}"==e)return t;if(Array.isArray(e))return e.map((function(e){return u(e,t,n)}));if("object"===Object(r["a"])(e)){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(o[i]=u(e[i],t,n));return o}if("string"===typeof e){var a,c=/{{(.+?)}}/g,l={};do{if(a=c.exec(e),a&&!(a[0]in l)){var d=a[1].trim(),p=d.split("?",2);if(2==p.length){var f=s(t,p[0].trim());"0"==f&&(f=!1);var m=f?0:1,h=p[1].split(":",2),b=h[m].trim();b="'"==b[0]?b.substr(1,b.length-2):s(t,b),l[a[0]]=b;continue}var v=s(t,d);if(void 0===v){if(n)continue;v=""}e!=a[0]&&"object"==Object(r["a"])(v)&&(v=JSON.stringify(v,null,2)),l[a[0]]=v}}while(a);var g=e;for(var k in l){if(e==k)return l[k];var y=k.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");g=g.replace(new RegExp(y,"g"),l[k])}return g}return e}var l=u;function d(e,t,n){for(var r=e,o=t.split("."),i=o.length,a=0;a<i-1;a++)"undefined"==typeof r[o[a]]&&(r[o[a]]={}),r=r[o[a]];return r[o[i-1]]=n,e}},"45ee":function(e,t,n){"use strict";n("a6e2")},"521e":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e._m(0),e.testPage?n("CmsPageEditor",{attrs:{preview:""},model:{value:e.testPage,callback:function(t){e.testPage=t},expression:"testPage"}}):e._e(),n("a",{attrs:{href:"https://tinyurl.com/api-create.php?url="+e.shareUrl,target:"_blank"}},[e._v("TinyURL")])],1)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",[n("strong",[e._v("Phi")]),e._v("UX")])}],a=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("ac1f"),n("841c"),n("1276"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"UiLocalStorage"},[e._t("default",null,{data:e.data,set:e.set,remove:e.remove})],2)}),c=[],s=(n("b0c0"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("159b"),n("a15b"),n("5319"),function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(n){return o(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;r<o;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return i.decompress(t);for(var n=new Array(t.length/2),r=0,o=n.length;r<o;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach((function(t){a.push(e(t))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(t){return o(n,e.charAt(t))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,o,i,a={},c={},s="",u="",l="",d=2,p=3,f=2,m=[],h=0,b=0;for(i=0;i<e.length;i+=1)if(s=e.charAt(i),Object.prototype.hasOwnProperty.call(a,s)||(a[s]=p++,c[s]=!0),u=l+s,Object.prototype.hasOwnProperty.call(a,u))l=u;else{if(Object.prototype.hasOwnProperty.call(c,l)){if(l.charCodeAt(0)<256){for(r=0;r<f;r++)h<<=1,b==t-1?(b=0,m.push(n(h)),h=0):b++;for(o=l.charCodeAt(0),r=0;r<8;r++)h=h<<1|1&o,b==t-1?(b=0,m.push(n(h)),h=0):b++,o>>=1}else{for(o=1,r=0;r<f;r++)h=h<<1|o,b==t-1?(b=0,m.push(n(h)),h=0):b++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)h=h<<1|1&o,b==t-1?(b=0,m.push(n(h)),h=0):b++,o>>=1}d--,0==d&&(d=Math.pow(2,f),f++),delete c[l]}else for(o=a[l],r=0;r<f;r++)h=h<<1|1&o,b==t-1?(b=0,m.push(n(h)),h=0):b++,o>>=1;d--,0==d&&(d=Math.pow(2,f),f++),a[u]=p++,l=String(s)}if(""!==l){if(Object.prototype.hasOwnProperty.call(c,l)){if(l.charCodeAt(0)<256){for(r=0;r<f;r++)h<<=1,b==t-1?(b=0,m.push(n(h)),h=0):b++;for(o=l.charCodeAt(0),r=0;r<8;r++)h=h<<1|1&o,b==t-1?(b=0,m.push(n(h)),h=0):b++,o>>=1}else{for(o=1,r=0;r<f;r++)h=h<<1|o,b==t-1?(b=0,m.push(n(h)),h=0):b++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)h=h<<1|1&o,b==t-1?(b=0,m.push(n(h)),h=0):b++,o>>=1}d--,0==d&&(d=Math.pow(2,f),f++),delete c[l]}else for(o=a[l],r=0;r<f;r++)h=h<<1|1&o,b==t-1?(b=0,m.push(n(h)),h=0):b++,o>>=1;d--,0==d&&(d=Math.pow(2,f),f++)}for(o=2,r=0;r<f;r++)h=h<<1|1&o,b==t-1?(b=0,m.push(n(h)),h=0):b++,o>>=1;while(1){if(h<<=1,b==t-1){m.push(n(h));break}b++}return m.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var o,i,a,c,s,u,l,d=[],p=4,f=4,m=3,h="",b=[],v={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)d[o]=o;a=0,s=Math.pow(2,2),u=1;while(u!=s)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(c>0?1:0)*u,u<<=1;switch(a){case 0:a=0,s=Math.pow(2,8),u=1;while(u!=s)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(c>0?1:0)*u,u<<=1;l=e(a);break;case 1:a=0,s=Math.pow(2,16),u=1;while(u!=s)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(c>0?1:0)*u,u<<=1;l=e(a);break;case 2:return""}d[3]=l,i=l,b.push(l);while(1){if(v.index>t)return"";a=0,s=Math.pow(2,m),u=1;while(u!=s)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(c>0?1:0)*u,u<<=1;switch(l=a){case 0:a=0,s=Math.pow(2,8),u=1;while(u!=s)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(c>0?1:0)*u,u<<=1;d[f++]=e(a),l=f-1,p--;break;case 1:a=0,s=Math.pow(2,16),u=1;while(u!=s)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(c>0?1:0)*u,u<<=1;d[f++]=e(a),l=f-1,p--;break;case 2:return b.join("")}if(0==p&&(p=Math.pow(2,m),m++),d[l])h=d[l];else{if(l!==f)return null;h=i+i.charAt(0)}b.push(h),d[f++]=i+h.charAt(0),p--,i=h,0==p&&(p=Math.pow(2,m),m++)}}};return i}()),u=s,l={name:"UiLocalStorage",props:{name:{type:String,requred:!1,default:"global"}},watch:{name:{immediate:!0,handler:function(){this.get()}}},data:function(){return{data:null}},methods:{get:function(){var e=localStorage.getItem(this.name);return this.data=e?JSON.parse(u.decompressFromUTF16(e)):null,this.$emit("get",this.data),this.data},set:function(e){this.data=e;var t=this.data?u.compressToUTF16(JSON.stringify(this.data)):null;return localStorage.setItem(this.name,t),this.data},remove:function(){this.data=null,localStorage.removeItem(this.name),this.$emit("remove")}}},d=l,p=n("2877"),f=Object(p["a"])(d,a,c,!1,null,null,null),m=f.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"UiVideoRecorder"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!e.stream,expression:"!stream"}],attrs:{type:"button"},on:{click:function(t){return e.startStream()}}},[e._v("turn camera ON")]),n("button",{directives:[{name:"show",rawName:"v-show",value:!!e.stream,expression:"!!stream"}],attrs:{type:"button"},on:{click:function(t){return e.stopStream()}}},[e._v("turn camera off")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.finalSrc,expression:"!finalSrc"}]},[n("video",{staticStyle:{display:"block",width:"320px",height:"240px"},attrs:{autoplay:"",muted:""},domProps:{muted:!0,srcObject:e.stream}}),n("button",{directives:[{name:"show",rawName:"v-show",value:!e.isRecording,expression:"!isRecording"}],staticClass:"ui-button --main",attrs:{type:"button",id:"startButton"},on:{click:function(t){return e.startRecording()}}},[e._v("REC")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.isRecording,expression:"isRecording"}],staticClass:"ui-button --cancel",attrs:{type:"button",id:"stopButton"},on:{click:function(t){return e.stopRecording()}}},[e._v("Stop")]),n("p",[e._v(e._s(e.isRecording?"grabando":"idle"))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!!e.finalSrc,expression:"!!finalSrc"}]},[n("video",{staticStyle:{display:"block",width:"320px",height:"240px"},attrs:{controls:"",src:e.finalSrc}}),n("a",{staticClass:"ui-button --main",attrs:{id:"downloadButton",href:e.finalSrc,download:"VideoGrabado.webm"}},[e._v(" Download ")]),n("button",{staticClass:"ui-button --cancel",attrs:{type:"button"},on:{click:function(t){e.finalSrc=null}}},[e._v("Restart")])])])},b=[],v={data:function(){return{isRecording:!1,stream:null,recorder:null,finalSrc:null}},mounted:function(){this.startStream()},methods:{startStream:function(){var e=this;return navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(t){return e.stream=t}))},stopStream:function(){this.stream&&(this.stream.getTracks().forEach((function(e){return e.stop()})),this.stream=null)},startRecording:function(){this.finalSrc=null,this.recorder=new MediaRecorder(this.stream),this.recorder.start(),this.isRecording=!0},stopRecording:function(){var e=this;this.recorder.ondataavailable=function(t){e.finalSrc=URL.createObjectURL(t.data)},this.recorder.stop(),this.isRecording=!1}}},g=v,k=Object(p["a"])(g,h,b,!1,null,null,null),y=k.exports,x=(n("8d57"),n("caa2")),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"CmsPageEditor",class:{"--layouting":e.isLayouting}},[n("div",{staticClass:"page-editor-toolbar ui-toolbar --wide --clear"},[e._t("toolbar"),n("h2",{staticClass:"page-toolbar-title"},[e._v(e._s(e.page.title))]),n("label",{staticClass:"ui-clickable preview-label ui-toolbar-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.isPreview,expression:"isPreview"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isPreview)?e._i(e.isPreview,null)>-1:e.isPreview},on:{input:function(t){return e.$emit("update:preview",e.isPreview)},change:function(t){var n=e.isPreview,r=t.target,o=!!r.checked;if(Array.isArray(n)){var i=null,a=e._i(n,i);r.checked?a<0&&(e.isPreview=n.concat([i])):a>-1&&(e.isPreview=n.slice(0,a).concat(n.slice(a+1)))}else e.isPreview=o}}}),e._v(" Vista previa ")]),n("UiDataDialog",{scopedSlots:e._u([{key:"trigger",fn:function(){return[n("UiIcon",{staticClass:"ui-clickable",attrs:{title:"Modelo de datos",value:"mdi:variable"}})]},proxy:!0},{key:"contents",fn:function(e){var t=e.innerModel,r=e.setModel;return[n("UiInputJson",{attrs:{value:t},on:{input:r}})]}}]),model:{value:e.pageModel,callback:function(t){e.pageModel=t},expression:"pageModel"}}),n("UiHistory",{staticClass:"ui-row history-controls",attrs:{name:"cms-page:"+e.page.id},on:{input:function(t){e.page=t,e.accept()}},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.hasUndo,r=e.hasRedo,o=e.undo,i=e.redo;return[n("UiIcon",{staticClass:"ui-clickable history-icon",class:{"--disabled":!t},attrs:{title:"Deshacer",value:"mdi:undo"},on:{click:o}}),n("UiIcon",{staticClass:"ui-clickable history-icon",class:{"--disabled":!r},attrs:{title:"Rehacer",value:"mdi:redo"},on:{click:i}})]}}]),model:{value:e.staged,callback:function(t){e.staged=t},expression:"staged"}}),n("UiIcon",{staticClass:"ui-clickable icon-layouting",attrs:{title:"Editar columnas",value:"mdi:table-border"},on:{click:function(t){e.isLayouting=!e.isLayouting}}}),n("UiIcon",{staticClass:"ui-clickable icon-settings",attrs:{title:"Opciones",value:"mdi:cog"},on:{click:function(t){e.isSettingsOpen=!e.isSettingsOpen}}}),e._t("toolbar-end")],2),e.isPreview?n("CmsPage",{staticClass:"page-editor-preview",attrs:{value:e.page,model:e.pageModel},on:{"update:model":function(t){e.pageModel=t}}}):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isPreview,expression:"!isPreview"}],staticClass:"page-layout cms-theme",class:"--theme-"+e.page.theme},[n("CmsLayoutEditor",{attrs:{"show-controls":e.isLayouting},on:{input:e.accept},scopedSlots:e._u([{key:"block",fn:function(t){return[n("div",{staticClass:"block-editor-container"},[n("CmsBlockEditor",{staticClass:"block-editor",on:{accept:e.accept,cancel:e.cancel,delete:function(n){return e.deleteBlock(t.column,t.block)}},model:{value:t.column.blocks[t.blockIndex],callback:function(n){e.$set(t.column.blocks,t.blockIndex,n)},expression:"slotData.column.blocks[slotData.blockIndex]"}}),n("CmsBlockLauncher",{staticClass:"small-launcher",attrs:{type:"popover",page:e.page,settings:e.settings},on:{input:function(n){return e.spliceBlock(n,t.column,t.blockIndex+1)}}})],1)]}}]),model:{value:e.page.sections,callback:function(t){e.$set(e.page,"sections",t)},expression:"page.sections"}}),n("CmsBlockLauncher",{staticClass:"page-launcher",attrs:{type:"default",page:e.page,settings:e.settings},on:{input:function(t){return e.appendBlock(t)}}})],1),n("UiDataWindow",{attrs:{text:"Opciones",icon:"mdi:cog",open:e.isSettingsOpen},on:{accept:function(t){e.accept(),e.isSettingsOpen=!1},cancel:function(t){e.cancel(),e.isSettingsOpen=!1}},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}},[n("PageSettings",{model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1)},C=[],O=(n("a434"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("UiWindow",e._b({ref:"uiwindow",staticClass:"UiDataWindow",on:{close:function(t){return e.cancel()},popup:function(t){return e.openPopup()}},scopedSlots:e._u([{key:"contents",fn:function(){return[e._t("default")]},proxy:!0},{key:"footer",fn:function(){return[n("button",{staticClass:"ui-button --cancel",attrs:{type:"button"},on:{click:function(t){return e.cancel()}}},[e._v("Cancelar")]),n("button",{staticClass:"ui-button --main",attrs:{type:"button"},on:{click:function(t){return e.accept()}}},[e._v("Aceptar")])]},proxy:!0}],null,!0)},"UiWindow",e.$attrs,!1))}),j=[],S=n("0437"),I={name:"UiDataWindow",components:{UiWindow:S["a"]},props:{value:{required:!1,default:null}},data:function(){return{innerModel:null,bc:null,popup:null}},watch:{value:{immediate:!0,handler:function(e){this.innerModel=e,this.postUpdate()}}},mounted:function(){var e=this;this.bc=new BroadcastChannel("ui_data_window"),this.bc.onmessage=function(t){"mounted"==t.data.action?e.bc.postMessage({action:"setModel",value:e.innerModel}):"setModel"==t.data.action&&(e.innerModel=t.data.value,e.emitInput())}},methods:{postUpdate:function(){this.bc&&this.bc.postMessage({action:"setModel",value:this.innerModel})},openPopup:function(){var e=this;this.popup=window.open("popup.html","_blank","location=no,menubar=no,toolbar=no,scrollbars=yes,resizable=yes,top=400,left=800,width=900,height=500"),this.popup.onbeforeunload=function(){e.$refs.uiwindow.setDock(null)}},closePopup:function(){this.popup&&(this.popup.close(),this.popup=null)},cancel:function(){this.$emit("cancel")},accept:function(){this.$emit("accept")},emitInput:function(){this.$emit("input",this.innerModel)}}},_=I,R=Object(p["a"])(_,O,j,!1,null,null,null),A=R.exports,E=n("fe4d"),P=n("fa30"),U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.options.custom?n(e.options.custom,{tag:"component",class:{"--focused":e.isFocused},style:e.value&&e.value.props?e.value.props.style:null,attrs:{definition:e.definition,value:e.value},on:{input:function(t){return e.$emit("input",t)},accept:function(t){return e.$emit("accept",t)},cancel:function(t){return e.$emit("cancel",t)},delete:function(t){return e.$emit("delete")},focus:function(t){e.isFocused=!0},blur:function(t){e.isFocused=!1}}}):n("EditorLayout",{staticClass:"cms-block-editor",class:{"--focused":e.isFocused},attrs:{definition:e.definition,value:e.value},on:{input:function(t){return e.$emit("input",t)},accept:function(t){return e.$emit("accept",t)},cancel:function(t){return e.$emit("cancel",t)},delete:function(t){return e.$emit("delete")}},scopedSlots:e._u([{key:"toolbar",fn:function(){return[e.options.toolbar?n("BlockEditorComponent",{staticClass:"toolbar-component",attrs:{definition:e.options.toolbar,value:e.value},on:{input:function(t){e.$emit("input",t),e.$emit("accept",t)}}}):e._e()]},proxy:!0}])},[n("div",{staticClass:"block-editor-face"},[e.options.face?n("BlockEditorComponent",{ref:"facecomponent",style:e.value&&e.value.props?e.value.props.style:null,attrs:{definition:e.options.face,value:e.value},on:{input:function(t){e.$emit("input",t),e.$emit("accept",t)},focus:function(t){e.isFocused=!0},blur:function(t){e.isFocused=!1}}}):e.definition&&e.definition.block&&e.definition.block.component?n("CmsBlockComponent",e._b({attrs:{name:e.definition.block.component}},"CmsBlockComponent",e.value.props,!1)):e._e()],1)])],1)},T=[],D=n("1da1"),M=(n("96cf"),n("e42c")),L=n("3d2b"),B=n("3e69"),N=n("f24c"),V=n("2048"),q={name:"CmsBlockEditor",mixins:[M["a"]],components:{EditorLayout:L["a"],BlockEditorComponent:B["a"],BlockListenersEditor:N["a"],CmsBlockComponent:V["a"],UiConditionEditor:P["a"],UiIcon:P["m"],UiDataDialog:P["b"],UiInputWedge:P["p"]},props:{value:{type:Object,required:!0}},data:function(){return{options:{},definition:{},isFocused:!1}},watch:{value:{immediate:!0,deep:!0,handler:function(e){var t=this;return Object(D["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$cms.getDefinition(e);case 2:t.definition=n.sent,t.options=t.definition&&t.definition.editor?t.definition.editor:{};case 4:case"end":return n.stop()}}),n)})))()}}}},z=q,F=Object(p["a"])(z,U,T,!1,null,null,null),J=F.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"CmsBlockLauncher",class:{"--open":e.isOpen,"--closed":!e.isOpen}},["popover"==e.type?n("UiPopover",{attrs:{open:e.isOpen},on:{"update:open":function(t){e.isOpen=t}},scopedSlots:e._u([{key:"trigger",fn:function(e){var t=e.isOpen;return[n("div",{staticClass:"launcher-trigger"},[n("div",{staticClass:"spacer"}),n("UiIcon",{staticClass:"launcher-icon",attrs:{value:t?"mdi:close-circle-outline":"mdi:plus-circle"}})],1)]}},{key:"contents",fn:function(t){var r=t.close;return[n("div",{staticClass:"popover-contents"},[n("LauncherContents",e._g(e._b({on:{input:function(e){return r()}}},"LauncherContents",e.$attrs,!1),e.$listeners))],1)]}}],null,!1,2102175976)}):n("LauncherContents",e._g(e._b({},"LauncherContents",e.$attrs,!1),e.$listeners))],1)},G=[],H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"LauncherContents"},[n("div",{staticClass:"launcher-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.text},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),t.stopPropagation(),e.autoCreate())},input:function(t){t.target.composing||(e.text=t.target.value)}}})]),n("UiTabs",{model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},e._l(e.availableTabs,(function(t,r){return n("UiTab",{key:r,attrs:{value:t,label:e.$t("CmsLauncher.Tab."+t)}})})),1),n("div",{staticClass:"content-under-tabs"},[e.launcherComponent?n("div",{staticClass:"launcher-component"},[n(e.launcherComponent.component,e._b({tag:"component",on:{input:e.onLauncherComponentInput,cancel:e.onLauncherComponentCancel}},"component",e.launcherComponent.props,!1))],1):e._e(),n("div",{staticClass:"launcher-picker"},[n("div",{staticClass:"launcher-picker-items"},e._l(e.currentTabBlocks,(function(t){return n("div",{key:t.id,staticClass:"launcher-picker-item",on:{click:function(n){return e.launchDefinition(t)}}},[n("UiIcon",{staticClass:"picker-item-icon",attrs:{value:t.icon}}),n("h3",[e._v(e._s(t.title))])],1)})),0)])])],1)},Q=[],X=(n("4de4"),n("b64b"),n("caad"),n("2532"),n("d81d"),n("40f1")),K=(n("498a"),n("99af"),function(e){var t="p";return"####"==e.substring(0,4)?(t="h4",e=e.substring(4).trim()):"###"==e.substring(0,3)?(t="h3",e=e.substring(3).trim()):"##"==e.substring(0,2)?(t="h2",e=e.substring(2).trim()):"#"==e.substring(0,1)&&(t="h1",e=e.substring(1).trim()),{component:"MediaHtml",title:"Text",props:{value:"<".concat(t,">").concat(e,"</").concat(t,">")}}}),Y=(n("fb6a"),function(e){var t="["==e.charAt(0)&&"]"==e.slice(-1);if(t){var n=e.slice(1,-1);return{title:n,component:"CmsInput",props:{type:"text",label:n},"v-model":n}}}),Z=function(e){var t=e.split("|");if(!(t.length<2)){var n=[];return t.forEach((function(e){var t=e.trim();t&&n.push({text:t,value:t.replace(/\s+/g,"_").toLowerCase()})})),{component:"CmsInputSelect",title:"Opcion",props:{options:n},"v-model":"select"}}},ee=(n("466d"),function(e){if(e.match(/^.*(vimeo|youtube|youtu).*/))return{component:"CmsMediaVideo",title:"Video",props:{url:e}}}),te=function(e){if(e.match(/^https?:\/\//))return{component:"CmsMediaLink",title:"Link",props:{href:e,text:"",secondary:e}}},ne=[Z,Y,ee,te,K],re={getSuggestedBlocks:function(e){var t=[],n=e.trim();return n?(ne.forEach((function(e){var r=e(n);r&&t.push(r)})),t):t}},oe=n("bd95"),ie={name:"LauncherContents",mixins:[oe["a"],M["a"]],components:{UiIcon:P["m"],UiTabs:P["u"],UiTab:P["t"]},props:{page:{type:Object,required:!1,default:function(){return{}}},placeholder:{type:String,required:!1,default:"Buscar ..."},hideTabs:{type:Array,required:!1,default:function(){return[]}},settings:{type:Object,required:!1,default:function(){return{}}}},data:function(){return{text:"",launcherComponent:null,emptyTagsTab:"default",currentTab:"default",defaultSettings:{modelPrefix:""}}},computed:{allSettings:function(){return Object.assign({},this.defaultSettings,this.settings)},availableBlocks:function(){var e=this,t=[];for(var n in this.$cms.blocks){var r=this.$cms.blocks[n];r.name=n,t.push(r)}return t.filter((function(t){return!t.disabled&&!e.containsDisabledTags(t)}))},availableTabs:function(){var e=this,t={};return this.availableBlocks.forEach((function(n){var r=n.tags?n.tags:[e.emptyTagsTab];r.forEach((function(e){t[e]=!0}))})),Object.keys(t)},currentTabBlocks:function(){var e=this;return this.availableBlocks.filter((function(t){return!t.tags&&e.currentTab==e.emptyTagsTab||t.tags&&t.tags.includes(e.currentTab)}))},suggestedBlocks:function(){return re.getSuggestedBlocks(this.text).map((function(e){return Object.assign(e,{_suggested:!0})}))}},methods:{containsDisabledTags:function(e){if(!this.hideTabs.length||!e.tags)return!1;for(var t=0;t<e.tags.length;t++)if(this.hideTabs.includes(e.tags[t]))return!0;return!1},launchDefinition:function(e){var t=Object.assign({},e.block,{component:e.name});return this.launchBlock(t)},launchBlock:function(e){var t=this;return Object(D["a"])(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$cms.getDefinition(e);case 2:if(r=n.sent,r){n.next=5;break}return n.abrupt("return");case 5:if(!r.launcher){n.next=9;break}return t.launcherComponent=r.launcher,t.launcherComponent.props&&(t.launcherComponent.props=Object(X["c"])(t.launcherComponent.props,{page:t.page})),n.abrupt("return");case 9:o=Object.assign({},e),o.props=Object.assign({},r.block.props,e.props),o.props=Object(X["c"])(o.props,{page:t.page},!0),o["v-model"]&&(i=t.countBlocks(r.id),o["v-model"]=t.allSettings.modelPrefix+o["v-model"]+(i>0?i+1:"")),t.$emit("input",o);case 14:case"end":return n.stop()}}),n)})))()},autoCreate:function(){this.suggestedBlocks.length&&(this.launchBlock(this.suggestedBlocks[0]),this.text="")},onDrawerClose:function(){this.launcherComponent=null},onLauncherComponentInput:function(e){var t=this,n=Array.isArray(e)?e:[e];n.forEach((function(e){return t.$emit("input",e)}))},onLauncherComponentCancel:function(){},countBlocks:function(e){var t=0;return this.page.blocks.forEach((function(n){n.component==e&&t++})),t}},i18n:{es:{"CmsLauncher.Tab.default":"Contenido","CmsLauncher.Tab.communication":"Comunicación","CmsLauncher.Tab.input":"Formulario","CmsLauncher.Tab.academia":"Academia","CmsLauncher.Tab.ecommerce":"eCommerce","CmsLauncher.Tab.cms":"CMS"},en:{"CmsLauncher.Tab.default":"Content","CmsLauncher.Tab.communication":"Communication","CmsLauncher.Tab.input":"Form","CmsLauncher.Tab.academia":"Academia","CmsLauncher.Tab.ecommerce":"eCommerce","CmsLauncher.Tab.cms":"CMS"}}},ae=ie,ce=(n("b884"),Object(p["a"])(ae,H,Q,!1,null,null,null)),se=ce.exports,ue={name:"CmsBlockLauncher",components:{LauncherContents:se,UiIcon:P["m"],UiPopover:P["s"]},props:{type:{type:String,required:!1,default:"default"}},data:function(){return{isOpen:!1}}},le=ue,de=(n("b678"),Object(p["a"])(le,W,G,!1,null,null,null)),pe=de.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"CmsLayoutEditor",class:{"--resizing":e.resizerData.isResizing,"--dragging":e.draggerData.isDragging,"--show-controls":e.showControls}},[n("div",{staticClass:"layout",on:{mousemove:function(t){return e.onResizerMove(t)},mouseup:function(t){return e.onResizerEnd(t)},touchmove:function(t){return e.onResizerMove(t)},touchend:function(t){return e.onResizerEnd(t)}}},e._l(e.sections,(function(t,r){return n("div",{key:t.id,staticClass:"layout-section",class:t.class},[n("div",{staticClass:"layout-row --ghost"},[n("div",{staticClass:"layout-column"},[n("draggable",{staticClass:"column-draggable",attrs:{group:"column-block",emptyInsertThreshold:0},on:{add:function(t){return e.onGhostAdd(t,0)}}})],1)]),e._l(t.rows,(function(t,o){return[n("div",{key:t.id,staticClass:"layout-row --notghost",class:t.class},[n("div",{staticClass:"layout-column --ghost"},[n("draggable",{staticClass:"column-draggable",attrs:{group:"column-block"},on:{add:function(t){return e.onGhostAdd(t,o,0)}}})],1),e._l(t.columns,(function(t,i){return[n("div",{key:t.id,staticClass:"layout-column --notghost",class:t.class,style:{flex:t.flex}},[n("div",{staticClass:"resizer",on:{mousedown:function(t){return e.onResizerStart(t,o,i)},touchstart:function(t){return e.onResizerStart(t,o,i)}}}),n("div",{staticClass:"deleter"},[n("button",{attrs:{type:"button"},on:{click:function(t){return e.deleteColumn(o,i)}}},[e._v("×")])]),n("draggable",{staticClass:"column-draggable column-contents",attrs:{handle:".block-drag-handle",group:"column-block",move:function(t){return e.onDraggableMove(t,o,i)},animation:200,emptyInsertThreshold:0,swapThreshold:.25},on:{start:function(n){return e.onDraggableStart(n,t)},end:function(t){return e.onDraggableEnd(t,o,i)}},model:{value:t.blocks,callback:function(n){e.$set(t,"blocks",n)},expression:"column.blocks"}},e._l(t.blocks,(function(a,c){return n("div",{key:a.id,staticClass:"layout-block",class:a.class},[e._t("block",[n("UiItem",{staticClass:"block-drag-handle",attrs:{text:a.text||"Bloque "+a.id,icon:a.icon||"mdi:circle-medium",secondary:"row: "+o+" col: "+i}})],{sectionIndex:r,rowIndex:o,colIndex:i,blockIndex:c,column:t,block:a})],2)})),0)],1),n("div",{key:t.id+"_ghost",staticClass:"layout-column --ghost"},[n("draggable",{staticClass:"column-draggable",attrs:{group:"column-block"},on:{add:function(t){return e.onGhostAdd(t,o,i+1)}}})],1)]}))],2),n("div",{key:o+1,staticClass:"layout-row --ghost"},[n("div",{staticClass:"layout-column"},[n("draggable",{staticClass:"column-draggable",attrs:{group:"column-block",emptyInsertThreshold:0},on:{add:function(t){return e.onGhostAdd(t,o+1)}}})],1)])]}))],2)})),0)])},me=[],he=n("5378"),be=n("b76a"),ve=n.n(be),ge={name:"CmsLayoutEditor",components:{UiItem:he["q"],draggable:ve.a},props:{value:{type:Array,required:!1,default:function(){return[]}},showControls:{type:Boolean,required:!1,default:!1}},watch:{value:{immediate:!0,handler:function(e){this.sections=e||[]}}},data:function(){return{resizerData:{isResizing:!1,initialX:null,targetColumn:null,nextColumn:null},draggerData:{isDragging:!1,block:null,sourceColumn:null,sourceIndex:null},sections:[],uidGenerator:0}},methods:{emitInput:function(){this.$emit("input",this.sections)},clearEmptyColumns:function(e){for(var t=[],n=0;n<e.rows.length;n++){for(var r=e.rows[n],o=[],i=0;i<r.columns.length;i++){var a=r.columns[i];a.blocks&&a.blocks.length&&o.push(a)}r.columns=o,r.columns.length&&t.push(r)}return e.rows=t,e},onDraggableStart:function(e,t){this.draggerData.isDragging=!0,this.draggerData.sourceIndex=e.oldIndex,this.draggerData.sourceColumn=t,this.draggerData.block=t.blocks[e.oldIndex]},onDraggableEnd:function(){this.draggerData.isDragging=!1,this.$el.querySelectorAll(".--potential").forEach((function(e){return e.classList.remove("--potential")})),this.emitInput()},onDraggableMove:function(e,t){this.$el.querySelectorAll(".--potential").forEach((function(e){return e.classList.remove("--potential")})),e.to.closest(".layout-column").classList.add("--potential")},onGhostAdd:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null!==n?this.createColumn(t,n):this.createRow(t);r.blocks.push(this.draggerData.block),this.emitInput()},createRow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t={id:this.uidGenerator++,title:"new row",class:"",columns:[{id:this.uidGenerator++,title:"new column",flex:1,class:"",blocks:[]}]};return this.sections[0].rows.splice(e,0,t),t.columns[0]},createColumn:function(e,t){var n={id:this.uidGenerator++,title:"new column",flex:1,class:"",blocks:[]};return this.sections[0].rows[e].columns.splice(t,0,n),n},deleteColumn:function(e,t){this.sections[0].rows[e].columns.splice(t,1),this.sections[0].rows[e].columns.length||this.sections[0].rows.splice(e,1),this.emitInput()},onResizerStart:function(e,t,n){e.preventDefault();var r=this.sections[0].rows[t].columns[n],o=this.sections[0].rows[t].columns[n+1];if(o){this.resizerData.isResizing=!0;for(var i=e.target.closest(".layout-row"),a=i.querySelectorAll(".column-contents"),c=0;c<a.length;c++){var s=a[c];this.sections[0].rows[t].columns[c].flex=s.offsetWidth}r.initialFlex=r.flex,o.initialFlex=o.flex,this.resizerData.initialX="touchstart"==e.type?e.touches[0].clientX:e.clientX,this.resizerData.targetColumn=r,this.resizerData.nextColumn=o}},onResizerMove:function(e){if(this.resizerData.isResizing){e.preventDefault();var t="touchmove"==e.type?e.touches[0].clientX:e.clientX,n=t-this.resizerData.initialX;this.resizerData.targetColumn.flex=this.resizerData.targetColumn.initialFlex+n,this.resizerData.nextColumn.flex=this.resizerData.nextColumn.initialFlex-n}},onResizerEnd:function(e){this.resizerData.isResizing&&(e.preventDefault(),this.resizerData.isResizing=!1,this.emitInput())}}},ke=ge,ye=(n("9dbe"),Object(p["a"])(ke,fe,me,!1,null,null,null)),xe=ye.exports,we=n("ade3"),Ce=n("2909"),Oe=0,je={sanitizePage:function(e){var t=JSON.parse(JSON.stringify(e)),n=t.sections||[];if(Array.isArray(t.blocks)){var r=t.layout;r.forEach((function(e,t){e.id=e.id||"row-".concat(Oe++),e.title=e.title||"Row ".concat(t+1),e.class="",e.columns=e.columns||[],e.columns.forEach((function(e,t){e.id=e.id||"col-".concat(Oe++),e.flex=e.flex||1,e.title=e.title||"Column ".concat(t+1),e.class="",e.blocks=[]}))}));for(var o=0;o<t.blocks.length;o++){var i,a,c=t.blocks[o];c.id=c.id||"block-".concat(Oe++),c.class=c.class||"";var s=(null===c||void 0===c||null===(i=c.layout)||void 0===i?void 0:i.row)||0,u=(null===c||void 0===c||null===(a=c.layout)||void 0===a?void 0:a.column)||0;delete c.layout,r[s].columns[u].blocks.push(c)}n=[{id:"section-0",class:"",rows:r}]}return{theme:"default",sections:n}},sanitizeLayout:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];console.log("PageHelper.sanitizeLayout",e,t),Array.isArray(t)||(t=[]);var n={rows:[{title:"Row I",columns:[{title:"Column I",flex:1,blocks:[]}]}]};if(!e)return n;Array.isArray(e)&&(e={rows:e});var r={};n.rows=Object(Ce["a"])(e.rows||[]);for(var o=0;o<n.rows.length;o++){var i=n.rows[o];i.id=i.id||"row-".concat(Oe++),i.title=i.title||"Row ".concat(o+1),i.class="",i.columns=Object(Ce["a"])(i.columns||[]);for(var a=0;a<i.columns.length;a++){var c=i.columns[a];c.id=c.id||"col-".concat(Oe++),c.flex=1,c.title=c.title||"Column ".concat(a+1),c.class="",c.blocks=Object(Ce["a"])(c.blocks||[]);for(var s=0;s<c.blocks.length;s++){var u=c.blocks[s]||{};u.id=u.id||"block-".concat(Oe++),u.class="",u.index&&(r[u.index]=u)}}}for(var l=0;l<t.length;l++){var d,p;if("undefined"==typeof r[l]){var f=t[l],m=(null===f||void 0===f||null===(d=f.layout)||void 0===d?void 0:d.row)||0,h=(null===f||void 0===f||null===(p=f.layout)||void 0===p?void 0:p.column)||0;n.rows[m].columns[h].blocks.push({id:f.id||"block-".concat(Oe++),class:"",index:l})}}return n},getPageValidationRules:function(e){if(!e)return[];var t=[];return Array.isArray(e.validation)&&e.validation.length>0&&(t=t.concat(e.validation)),e.blocks.filter((function(e){return Array.isArray(e.validation)&&e.validation.length>0})).forEach((function(e){return t=t.concat(e.validation)})),e.blocks.filter((function(e){return e["v-model"]&&e.props&&e.props.required})).forEach((function(e){var n=e.props||{},r=n.label||n.title||e["v-model"];t.push({text:"'".concat(r,"' es obligatorio"),rule:Object(we["a"])({},e["v-model"],{"&nempty":!0})})})),t},getDataSchema:function(e){var t={type:"object",properties:{}};return e&&e.blocks&&e.blocks.length?(e.blocks.filter((function(e){return!!e["v-model"]})).forEach((function(e){var n=e.props||{},r={name:e["v-model"],title:n.label||n.title||e["v-model"],label:n.label||n.title||e["v-model"],text:n.label||n.title||e["v-model"],secondary:n.label||n.title||e["v-model"],type:null,props:null};switch(e.component){case"CmsInput":switch(n.type){case"select":n.multiple?(r.type="array",r.items={type:"string",enum:n.options||[]}):(r.type="string",r.enum=n.options||[]);break;case"text":case"textarea":r.type="text";break;case"number":r.type="number";break;case"checkbox":r.type="boolean";break}break;case"CmsInputSelect":case"InputSelect":n.multiple?(r.type="array",r.items={type:"string",enum:n.options||[]}):(r.type="string",r.enum=n.options||[]);break;case"CmsInputText":case"CmsInputTextarea":case"InputText":case"InputTextarea":r.type="text";break;case"CmsInputNumber":case"InputNumber":r.type="number";break;case"CmsInputCheckbox":case"InputCheckbox":r.type="boolean";break;case"CmsQuizQuestion":case"QuizQuestion":r.type="string",r.enum=n.options||[];break;default:r.type="string";break}t.properties[r.name]=r})),t):t},getPageFields:function(e){if(!e||!e.blocks||!e.blocks.length)return[];var t=[];return e.blocks.filter((function(e){return!!e["v-model"]})).forEach((function(e){var n=e.props||{},r={name:e["v-model"],label:n.label||n.title||e["v-model"],type:null,options:null};switch(e.component){case"CmsInput":switch(n.type){case"select":r.type="list",r.options={multiple:n.multiple,values:n.options};break;case"text":case"textarea":r.type="text";break;case"number":r.type="number";break;case"checkbox":r.type="boolean";break}break;case"CmsInputSelect":case"InputSelect":r.type="list",r.options={multiple:n.multiple,values:n.options};break;case"CmsInputText":case"CmsInputTextarea":case"InputText":case"InputTextarea":r.type="text";break;case"CmsInputNumber":case"InputNumber":r.type="number";break;case"CmsInputCheckbox":case"InputCheckbox":r.type="boolean";break;case"CmsQuizQuestion":case"QuizQuestion":r.type="list",r.options={multiple:!1,values:n.options};break;default:r.type="text";break}t.push(r)})),t}},Se=je,Ie={name:"CmsPageEditor",components:{CmsPage:x["a"],PageSettings:E["a"],UiHistory:P["l"],UiIcon:P["m"],UiWindow:P["w"],UiDataWindow:A,UiDataDialog:P["b"],UiInputJson:P["o"],CmsBlockEditor:J,CmsBlockLauncher:pe,CmsLayoutEditor:xe},provide:function(){return{CmsPageRoot:this.CmsPageRoot}},props:{value:{type:Object,required:!1,default:null},settings:{type:Object,required:!1,default:function(){return{}}},preview:{type:Boolean,required:!1,default:!1}},data:function(){return{page:null,pageModel:{},isSettingsOpen:!1,isLayouting:!1,isPreview:!1,CmsPageRoot:{schema:null},staged:null}},watch:{value:{immediate:!0,handler:function(e){this.page=Se.sanitizePage(e),this.CmsPageRoot.schema=Se.getDataSchema(this.page),this.staged=JSON.parse(JSON.stringify(this.page))}},preview:{immediate:!0,handler:function(e){this.isPreview=e}}},methods:{cancel:function(){this.page=JSON.parse(JSON.stringify(this.staged)),this.CmsPageRoot.schema=Se.getDataSchema(this.page)},accept:function(){this.staged=JSON.parse(JSON.stringify(this.page)),this.$emit("input",this.staged)},spliceBlock:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n?t.blocks.push(e):t.blocks.splice(n,0,e),this.accept()},deleteBlock:function(e,t){e.blocks.splice(e.blocks.indexOf(t),1),this.accept()},appendBlock:function(e){var t,n=this.page.sections[this.page.sections.length-1],r=n.rows[n.rows.length-1];if(1==r.columns.length)t=r.columns[0];else{var o={columns:[{flex:1,blocks:[]}]};n.rows.push(o),t=o.columns[0]}t.blocks.push(e),this.accept()}}},_e=Ie,Re=(n("45ee"),Object(p["a"])(_e,w,C,!1,null,null,null)),Ae=Re.exports,Ee={layout:[{columns:[{flex:1,blocks:[]}]},{columns:[{flex:1,blocks:[]},{flex:1,blocks:[]}]}],blocks:[{component:"MediaVideo",props:{url:"./test1.webm",style:{height:"{{videoH}}"},chapters:[{name:"golpe1",start:13441,end:"16080"},{name:"golpe2",start:16080,end:21662},{name:"texto",start:21662},{name:"imagen",start:24167},{name:"pregunta",start:26900},{name:"snap1",start:29675,end:30174},{name:"snap2",start:30174,end:"30634"},{name:"snap3",start:30634,end:36682},{name:"bye",start:36682}]},layout:{row:0,column:0,order:0},"v-on":{"chapter-enter":{switch:"{{$event}}",case:[{value:"golpe1",do:{chain:[{info:{text:"Encoger video (240px)",icon:"mdi:variable"},do:{call:"echo",args:"240px"},assign:"videoH"}]}},{value:"golpe2",do:{chain:[{info:{text:"Encoger video (100px)",icon:"mdi:variable"},do:{call:"echo",args:"100px"},assign:"videoH"}]}},{value:"snap1",do:{chain:[{info:{text:"Cambiar estilos (1)",icon:"mdi:variable"},do:{call:"echo",args:"font-size: 30px; color: red;"},assign:"estilos"},{info:{icon:"mdi:variable",text:"Cambiar estilos (imagen)",secondary:""},do:{call:"echo",args:{border:"12px solid white",transition:"all var(--ui-duration-snap)"}},assign:"estilosImagen"}]}},{value:"snap2",do:{chain:[{info:{text:"Cambiar estilos (2)",icon:"mdi:variable"},do:{call:"echo",args:"font-size: 48px; color: blue;"},assign:"estilos"},{info:{icon:"mdi:variable",text:"Cambiar estilos imagen (2)",secondary:""},do:{call:"echo",args:{border:"12px solid white","box-shadow":"0 0 30px 0 #00000055",transition:"all var(--ui-duration-snap)"}},assign:"estilosImagen"}]}},{value:"snap3",do:{chain:[{info:{text:"Cambiar estilos (3)",icon:"mdi:variable"},do:{call:"echo",args:"font-size: 1em; color: var(--ui-color-primary);"},assign:"estilos"},{info:{icon:"mdi:variable",text:"Cambiar estilos imagen (3)",secondary:""},do:{call:"echo",args:{border:"12px solid white","box-shadow":"0 0 30px 0 #00000055",transform:"rotate(2deg)",transition:"all var(--ui-duration-snap)"}},assign:"estilosImagen"}]}},{value:"bye",do:{chain:[{info:{text:"ocultarvideo = 1",icon:"mdi:variable"},do:{call:"echo",args:1},assign:"ocultarvideo"}]}}],default:null,info:null},"update:chapters":{chain:[{info:{text:"Asignar",icon:"mdi:variable"},do:{call:"echo",args:"{{$event}}"},assign:"capitulos"}]},play:{chain:[{info:{text:"Asignar",icon:"mdi:variable"},do:{call:"echo",args:""},assign:"estilos"},{info:{text:"Asignar",icon:"mdi:variable"},do:{call:"echo",args:""},assign:"videoH"},{info:{text:"Asignar",icon:"mdi:variable"},do:{call:"echo",args:[]},assign:"capitulos"},{info:{text:"Asignar",icon:"mdi:variable"},do:{call:"echo",args:{border:"none","box-shadow":"none",transform:"none",transition:"all var(--ui-duration-snap)"}},assign:"estilosImagen"}]}},"v-if":{or:[{op:"neq",arg1:null,arg2:null,field:"ocultarvideo",args:1}]}},{component:"MediaHtml",props:{value:"<h1>Arnau 4</h1>",style:"{{estilos}}"},layout:{row:1,column:0,order:0},"v-if":{or:[{op:"array.includes",arg1:null,arg2:null,field:"capitulos",args:"texto"}]}},{component:"MediaImage",props:{src:"https://www.artevistas.eu/wp-content/uploads/2017/08/arnau4-80x80cm-e1509365862401.jpg",style:"{{estilosImagen}}"},layout:{row:1,column:1,order:0},"v-if":{or:[{op:"array.includes",arg1:null,arg2:null,field:"capitulos",args:"imagen"}]}},{component:"InputSelect","v-model":"select",props:{type:"select",label:"Que tipo de obra te interesa ?",message:"",native:!1,multiple:!1,options:[{text:"Oleo",value:"oleo"},{text:"Acuarela",value:"acuarela"},{text:"Acrílico",value:"acrilico"},{text:"Otros",value:"otros"}]},layout:{row:1,column:0,order:1},"v-if":{or:[{op:"array.includes",arg1:null,arg2:null,field:"capitulos",args:"pregunta"}]}}],theme:"default"},Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"BanorteVentana"},[n("h1",[e._v("Pago con banorte ??")]),n("button",{staticClass:"ui-button --main",attrs:{type:"button"},on:{click:e.go}},[e._v("Pagar (?)")])])},$e=[],Ue={name:"BanorteVentana",data:function(){return{params:{MerchantID:null,User:null,Password:null,Mode:"AUT",ControlNumber:null,TerminalID:null,Amount:null,MerchantName:null,MerchantCity:null,Language:null,CustomerRef1:null,CustomerRef2:null,CustomerRef3:null,CustomerRef4:null,CustomerRef5:null}}},beforeMount:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.importLibrary("https://multicobros.banorte.com/orquestador/resources/js/jquery-3.3.1.js","$");case 2:return t.next=4,e.importLibrary("https://multicobros.banorte.com/orquestador/lightbox/checkout.js","Payment");case 4:Payment.setJQuery($),Payment.setEnv("pro");case 6:case"end":return t.stop()}}),t)})))()},methods:{go:function(){var e=Payment.encrypt({params:this.params});console.log("encriptado",e)},importLibrary:function(e,t){return new Promise((function(n,r){"undefined"!==typeof window[t]&&n(window[t]);var o,i,a=document.createElement("script");a.src=e,o=function(e){a.removeEventListener("load",o),a.removeEventListener("error",i),"undefined"!=typeof Payment&&n(Payment),"undefined"==typeof window[t]&&r("Could not load library '".concat(t,"'")),n(window[t])},i=function(){a.removeEventListener("load",o),a.removeEventListener("error",i),r("Error fetching '".concat(a.src,"'"))},a.addEventListener("load",o),a.addEventListener("error",i),document.body.appendChild(a)}))}}},Te=Ue,De=Object(p["a"])(Te,Pe,$e,!1,null,null,null),Me=De.exports,Le={components:{UiVideo:P["v"],UiVideoRecorder:y,CmsPageEditor:Ae,UiLocalStorage:m,CmsLayoutEditor:xe,BanorteVentana:Me},data:function(){return{testPage:null,isPreview:!1,videoData:null,stream:null,recorder:null,finalSrc:null}},mounted:function(){try{var e=new URLSearchParams(window.location.search).get("p");if(e){var t=JSON.parse(u.decompressFromEncodedURIComponent(e));t&&(this.testPage=t)}}catch(n){}this.testPage||(this.testPage=Ee)},computed:{shareUrl:function(){var e=u.compressToEncodedURIComponent(JSON.stringify(this.testPage));return window.location.origin+"/"+window.location.pathname.split("/")[1]+"?p="+e}}},Be=Le,Ne=(n("9a6e"),Object(p["a"])(Be,o,i,!1,null,null,null)),Ve=Ne.exports;n("130e"),n("fa42");r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(Ve)}}).$mount("#app")},5903:function(e,t,n){},"5d3e":function(e,t,n){"use strict";n("6996")},6996:function(e,t,n){},"8d57":function(e,t,n){"use strict";var r=n("1da1"),o=(n("96cf"),n("2b0e")),i=n("53ca"),a={id:"assign",icon:"mdi:variable",text:"Variable",secondary:"Establece el valor de una variable",schema:'... json-schema para el objeto "args"',handler:function(e){return"object"==Object(i["a"])(e)&&(e=JSON.stringify(e)),Function('"use strict";return ('+e+")")()}},c=(n("d3b7"),n("3ca3"),n("ddb0"),function(){return n.e("chunk-2d0c774c").then(n.bind(null,"5160"))}),s={id:"console",icon:"mdi:console-line",text:"Mostrar en consola",secondary:"Despliega información en la consola del navegador",schema:'... json-schema para el objeto "args"',handler:function(e){console.log("CMS>",e,this)},editor:{component:c}},u=(n("d81d"),n("40f1")),l=n("a414"),d=function(){return n.e("chunk-2d222cd9").then(n.bind(null,"cfbb"))},p={id:"http",icon:"mdi:api",text:"HTTP",secondary:"Ejecutar request HTTP",schema:'... json-schema para el objeto "args"',handler:function(e){if(e.url){var t=e.url,n=e.method?e.method.toUpperCase():"GET",r=e.body,o=new l["a"];if(o)return o.fetch(t,{method:n,body:r}).then((function(e){return e.clone().json().catch((function(){return e.text()}))})).then((function(t){return e.map&&Array.isArray(t)&&(t=t.map((function(t){return Object(u["c"])(e.map,{item:t})}))),t})).catch((function(e){return console.warn("cms.http:",e),null}));console.warn("cms/actions/http2: no httpClient found")}else console.warn("cms/actions/http2: no url specified")},editor:{component:d}},f={id:"goto",icon:"mdi:open-in-new",text:"Ir a ...",secondary:"Navegar hacia un Phi",schema:'... json-schema para el objeto "args"',handler:function(e){console.log("goto:",e,this)}},m=function(){return n.e("chunk-44f504b3").then(n.bind(null,"d24f"))},h={tags:["cms"],name:"CmsDialog",title:"Diálogo",icon:"mdi:dock-window",block:{component:m}},b={actions:{assign:a,console:s,http:p,goto:f},blocks:{CmsDialog:h}},v=function(){return n.e("chunk-2d0af8f9").then(n.bind(null,"0f9f"))},g=function(){return n.e("chunk-495f4d85").then(n.bind(null,"c87a"))},k={name:"MediaDocument",title:"Documento embebido",icon:"mdi:file-word",block:{component:v,props:{value:"",provider:"google"}},editor:{face:{component:g,"v-model":"block.props",props:{path:"{{$settings.uploadURL}}"}}}},y=n("fa30"),x=function(){return n.e("chunk-b891c0ba").then(n.bind(null,"72ea"))},w=function(){return n.e("chunk-1deb14ae").then(n.bind(null,"733e"))},C=function(){return n.e("chunk-2d21f0e8").then(n.bind(null,"d7cb"))},O={name:"MediaFile",title:"Archivo",icon:"mdi:paperclip",description:"Archivo",block:{component:x,props:{href:"",text:"",secondary:"",name:"",size:"",mimetype:""}},editor:{launcher:{component:C,props:{path:"{{$settings.uploadURL}}"}},face:{component:w,"v-model":"block.props"},actions:[{title:"Detalles",component:y["k"],"v-model":"block",props:{schema:{fields:[{type:"text",label:"Título",model:"props.text"},{type:"text",label:"Descripción",model:"props.secondary"},{type:"static",label:"Nombre",model:"props.name"},{type:"static",label:"Tamaño",model:"props.size"},{type:"static",label:"Tipo",model:"props.mimetype"}]}}}]}},j=function(){return n.e("chunk-2d21e38b").then(n.bind(null,"d548"))},S=function(){return n.e("chunk-15f6d74c").then(n.bind(null,"cc96"))},I={name:"MediaGallery",title:"Galería",icon:"mdi:image-multiple",block:{component:j,props:{files:[],view:"grid",previewLimit:4}},editor:{actions:[{title:"Galería",component:S,"v-model":"block.props",props:{path:"{{$settings.uploadURL}}"}}]}},_=function(){return n.e("chunk-2d22ca70").then(n.bind(null,"f3c0"))},R=function(){return n.e("chunk-128bcd3a").then(n.bind(null,"8821"))},A={title:"Texto",icon:"mdi:text",block:{component:_,props:{value:""}},editor:{custom:R}},E=function(){return n.e("chunk-3227a1e3").then(n.bind(null,"338f"))},P=function(){return n.e("chunk-4f5767fb").then(n.bind(null,"3d00"))},$={name:"MediaImage",title:"Imagen",icon:"mdi:image",block:{component:E,props:{src:""}},settings:{uploadURL:{type:String,required:!0}},editor:{face:{component:P,"v-model":"block.props.src",props:{path:"{{$settings.uploadURL}}"}},actions:[{title:"URL",component:y["k"],"v-model":"block.props",props:{schema:{fields:[{model:"src",type:"text",label:"URL de la imágen"},{model:"href",type:"text",label:"Vínculo",props:{placeholder:"http://"}}]}}}]}},U=function(){return n.e("chunk-b93ff1ac").then(n.bind(null,"9634"))},T=function(){return n.e("chunk-fefab9e0").then(n.bind(null,"275e"))},D={name:"MediaLink",title:"Link",icon:"mdi:open-in-new",description:"Vínculo a página externa",block:{component:U,props:{href:"",text:"",secondary:""}},editor:{face:{component:T,"v-model":"block.props"}}},M=function(){return n.e("chunk-3f4bec47").then(n.bind(null,"e2c7"))},L={name:"MediaLoremIpsum",title:"Lorem Ipsum",icon:"mdi:translate",description:"Lorem ipsum dolor sit amet",block:{component:M,props:{nParagraphs:2,nWords:56}},editor:{toolbar:{"v-model":"block",component:y["k"],props:{inline:!0,schema:{fields:[{type:"text",label:"Cantidad de parrafos",model:"props.nParagraphs",props:{size:2,style:"width: 80px"}},{type:"text",label:"Cantidad de palabras",model:"props.nWords",props:{size:3,style:"width: 80px"}}]}}},actions:[{title:"Editor de Lipsum",component:y["k"],"v-model":"block",props:{schema:{fields:[{type:"number",label:"Cantidad de parrafos",model:"props.nParagraphs"},{type:"number",label:"Cantidad de palabras",model:"props.nWords"}]}}}]}},B=function(){return Promise.resolve().then(n.bind(null,"4f2f"))},N=function(){return n.e("chunk-2d0c0865").then(n.bind(null,"41c5"))},V=function(){return n.e("chunk-2e1cc841").then(n.bind(null,"cfc4"))},q={id:"MediaVideo",title:"Video",icon:"mdi:youtube",block:{component:B,"v-model":"video",props:{url:""}},editor:{face:{component:V,"v-model":"block.props.url"},actions:[{title:"Capítulos",component:N,"v-model":"block.props.chapters",props:{url:"{{block.props.url}}"}}]}},z={blocks:{MediaHtml:A,MediaImage:$,MediaVideo:q,MediaLink:D,MediaFile:O,MediaGallery:I,MediaDocument:k,MediaLoremIpsum:L},actions:{}},F=function(){return Promise.resolve().then(n.bind(null,"fd10"))},J=function(){return n.e("chunk-4ab05380").then(n.bind(null,"94c2"))},W=function(){return n.e("chunk-2d20fcf8").then(n.bind(null,"b4e5"))},G={tags:["input"],name:"InputButton",title:"Button",icon:"mdi:card",block:{component:F,"v-model":"button",props:{type:"button"}},editor:{face:{component:J,"v-model":"block.props"},actions:[{title:"Button",component:W,"v-model":"block"}]}},H=function(){return Promise.resolve().then(n.bind(null,"fd10"))},Q=function(){return n.e("chunk-4ab05380").then(n.bind(null,"94c2"))},X=function(){return n.e("chunk-2d20fcf8").then(n.bind(null,"b4e5"))},K={tags:["input"],name:"InputCheckbox",title:"Checkbox",icon:"mdi:checkbox-blank-outline",block:{component:H,"v-model":"check",props:{type:"checkbox"}},editor:{face:{component:Q,"v-model":"block.props"},actions:[{title:"Checkbox",component:X,"v-model":"block"}]}},Y=function(){return Promise.resolve().then(n.bind(null,"fd10"))},Z=function(){return n.e("chunk-4ab05380").then(n.bind(null,"94c2"))},ee=function(){return n.e("chunk-2d20fcf8").then(n.bind(null,"b4e5"))},te={id:"CmsInputTimestamp",name:"InputDate",tags:["input"],title:"Fecha",icon:"mdi:calendar",block:{component:Y,props:{type:"date"}},editor:{face:{component:Z,"v-model":"block.props"},actions:[{title:"Fecha",component:ee,"v-model":"block"}]}},ne=function(){return Promise.resolve().then(n.bind(null,"fd10"))},re=function(){return n.e("chunk-2d20fcf8").then(n.bind(null,"b4e5"))},oe={tags:["input"],name:"InputFile",title:"Archivo",icon:"mdi:paperclip",settings:{uploadURL:{type:String,required:!0}},block:{component:ne,"v-model":"files",props:{type:"file",path:"{{$settings.uploadURL}}"}},editor:{actions:[{title:"Archivo",component:re,"v-model":"block"}]}},ie=function(){return Promise.resolve().then(n.bind(null,"fd10"))},ae=function(){return n.e("chunk-4ab05380").then(n.bind(null,"94c2"))},ce=function(){return n.e("chunk-2d20fcf8").then(n.bind(null,"b4e5"))},se={tags:["input"],name:"InputNumber",title:"Número",icon:"mdi:numeric",block:{component:ie,"v-model":"number",props:{type:"number"}},editor:{face:{component:ae,"v-model":"block.props"},actions:[{title:"Número",component:ce,"v-model":"block"}]}},ue=function(){return Promise.resolve().then(n.bind(null,"fd10"))},le=function(){return n.e("chunk-4ab05380").then(n.bind(null,"94c2"))},de=function(){return n.e("chunk-2d20fcf8").then(n.bind(null,"b4e5"))},pe={tags:["input"],name:"InputPassword",title:"Contraseña",icon:"mdi:form-textbox-password",block:{component:ue,"v-model":"password",props:{type:"password"}},editor:{face:{component:le,"v-model":"block.props"},actions:[{title:"Contraseña",component:de,"v-model":"block"}]}},fe=function(){return Promise.resolve().then(n.bind(null,"fd10"))},me=function(){return n.e("chunk-4ab05380").then(n.bind(null,"94c2"))},he=function(){return n.e("chunk-2d20fcf8").then(n.bind(null,"b4e5"))},be={tags:["input"],name:"InputSelect",title:"Select",icon:"mdi:form-dropdown",block:{component:fe,"v-model":"select",props:{type:"select"}},editor:{toolbar:{"v-model":"block",component:y["k"],props:{inline:!0,schema:{fields:[{model:"props.multiple",type:"select-native",options:[{text:"Múltiple",value:!0},{text:"Único",value:!1}]},{model:"props.native",type:"select-native",options:[{text:"Lista desplegable",value:!0},{text:"Lista con iconos",value:!1}]}]}}},face:{component:me,"v-model":"block.props"},actions:[{title:"Select",component:he,"v-model":"block"}]}},ve=function(){return Promise.resolve().then(n.bind(null,"fd10"))},ge=function(){return n.e("chunk-4ab05380").then(n.bind(null,"94c2"))},ke=function(){return n.e("chunk-2d20fcf8").then(n.bind(null,"b4e5"))},ye={tags:["input"],name:"InputText",title:"Text",icon:"mdi:form-textbox",block:{component:ve,"v-model":"text",props:{type:"text"}},editor:{face:{component:ge,"v-model":"block.props"},actions:[{title:"Text",component:ke,"v-model":"block"}]}},xe=function(){return Promise.resolve().then(n.bind(null,"fd10"))},we=function(){return n.e("chunk-4ab05380").then(n.bind(null,"94c2"))},Ce=function(){return n.e("chunk-2d20fcf8").then(n.bind(null,"b4e5"))},Oe={tags:["input"],name:"InputTextarea",title:"Textarea",icon:"mdi:form-textarea",block:{component:xe,"v-model":"textarea",props:{type:"textarea"}},editor:{face:{component:we,"v-model":"block.props"},actions:[{title:"Textarea",component:Ce,"v-model":"block"}]}},je={blocks:{InputText:ye,InputTextarea:Oe,InputSelect:be,InputCheckbox:K,InputDate:te,InputNumber:se,InputFile:oe,InputPassword:pe,InputButton:G}},Se=function(){return n.e("chunk-65270408").then(n.bind(null,"322c"))},Ie=function(){return Promise.all([n.e("chunk-65270408"),n.e("chunk-66c5b398")]).then(n.bind(null,"d1cc"))},_e={id:"CmsMediaMath",name:"MathKatex",tags:["academia"],title:"Fórmula",icon:"mdi:variable",block:{component:Se,props:{value:"x = \\frac { -b \\pm \\sqrt{ b^2-4ac } } { 2a }"}},editor:{face:{component:Ie,"v-model":"block.props.value"}}},Re=function(){return n.e("chunk-41d491cc").then(n.bind(null,"80c1"))},Ae=function(){return n.e("chunk-156bda74").then(n.bind(null,"2151"))},Ee={name:"QuizQuestion",tags:["input","academia"],title:"Pregunta",icon:"mdi:format-list-checks",block:{component:Re,"v-model":"question",props:{title:"",options:[]}},editor:{face:{component:Ae,"v-model":"block.props"}}},Pe={name:"cms-plugin-school",version:"0.1.0",description:"Elementos para el salon de clase (formulas, tablero, diccionaro, etc)",blocks:{MathKatex:_e,QuizQuestion:Ee},actions:{}};n("a15b"),n("99af");function $e(e,t){if(!e)return null;var n=[];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=t?t+"["+r+"]":r,a=e[r];if(null==a)continue;"object"==Object(i["a"])(a)?n.push(this.serialize(a,o)):("number"==typeof a||a.length>0)&&n.push(encodeURIComponent(o)+"="+encodeURIComponent(a))}return n.join("&")}var Ue={id:"google.sheets.findRow",icon:"mdi:google-spreadsheet",text:"Google Sheet: Buscar fila",secondary:"Consulta datos de un Google Spreadsheet",schema:'... json-schema para el objeto "args"',editor:{component:y["k"],props:{schema:{fields:[{model:"spreadsheetId",type:"text",label:"Sheet ID",props:{size:80}},{model:"key",type:"json",label:"Columnas"}]}}},handler:function(e){return Object(u["a"])({action:"http",arguments:{url:"/1/google/sheets/sheet/".concat(e.spreadsheetId,"/record?").concat($e(e.key,"key"))}},this)}},Te={id:"google.sheets.getRange",icon:"mdi:google-spreadsheet",text:"Google Sheet: Leer rango",secondary:"Consulta datos de un Google Spreadsheet",schema:'... json-schema para el objeto "args"',editor:{component:y["k"],props:{schema:{fields:[{model:"spreadsheetId",type:"text",label:"Sheet ID"},{model:"range",type:"text",label:"Rango",default:"Sheet1"}]}}},handler:function(e){return console.log("leyendo spreadsheet",e),Object(u["a"])({action:"http",arguments:{url:"/1/google/sheets/sheet/".concat(e.spreadsheetId,"?range=").concat(e.range||"")}},this)}},De={id:"google.sheets.saveRow",icon:"mdi:google-spreadsheet",text:"Google Sheet: Guardar fila",secondary:"Sobreescribe una fila",schema:'... json-schema para el objeto "args"',editor:{component:y["k"],props:{schema:{fields:[{model:"spreadsheetId",type:"text",label:"Sheet ID",props:{size:80}},{model:"body",type:"json",label:"Body"}]}}},handler:function(e){return Object(u["a"])({action:"http",arguments:{method:"PUT",url:"/1/google/sheets/sheet/".concat(e.spreadsheetId,"/record"),body:e.body}},this)}},Me={actions:{"google.sheets.findRow":Ue,"google.sheets.getRange":Te,"google.sheets.saveRow":De}},Le=new o["a"]({data:function(){return{blocks:{},actions:{}}},methods:{plugin:function(e){Object.assign(this.blocks,e.blocks),Object.assign(this.actions,e.actions)},getDefinition:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e&&e.component){n.next=2;break}return n.abrupt("return",null);case 2:if(r=e.type||e.component,"undefined"==typeof t.blocks[r]){n.next=5;break}return n.abrupt("return",t.blocks[r]);case 5:if("Cms"!=r.substr(0,3)||"undefined"==typeof t.blocks[r.substr(3)]){n.next=7;break}return n.abrupt("return",t.blocks[r.substr(3)]);case 7:case"end":return n.stop()}}),n)})))()},getActionDefinition:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",null);case 2:if("undefined"==typeof t.actions[e]){n.next=4;break}return n.abrupt("return",t.actions[e]);case 4:return n.abrupt("return",null);case 5:case"end":return n.stop()}}),n)})))()}}});Le.plugin(b),Le.plugin(z),Le.plugin(je),Le.plugin(Pe),Le.plugin(Me);t["a"]=Le},"8dc9":function(e,t,n){},"9a6e":function(e,t,n){"use strict";n("a338")},"9bef":function(e,t,n){},"9dbe":function(e,t,n){"use strict";n("521e")},a338:function(e,t,n){},a414:function(e,t,n){"use strict";n.d(t,"a",(function(){return r["a"]})),n.d(t,"b",(function(){return o["a"]}));var r=n("da6f"),o=n("6936")},a6e2:function(e,t,n){},b29e:function(e,t,n){},b483:function(e,t,n){"use strict";n("9bef")},b678:function(e,t,n){"use strict";n("22cd")},b884:function(e,t,n){"use strict";n("163f")},b925:function(e,t,n){"use strict";n("8dc9")},c9ab:function(e,t,n){},caa2:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cms-page cms-theme",class:e.value&&e.value.theme?"--theme-"+e.value.theme:null},[n("div",{staticClass:"cms-page-sections"},e._l(e.value.sections,(function(t){return n("div",{key:t.id,staticClass:"page-section"},e._l(t.rows,(function(t){return n("div",{key:t.id,staticClass:"page-row"},e._l(t.columns,(function(t){return n("div",{key:t.id,staticClass:"page-column",style:{flex:t.flex}},e._l(t.blocks,(function(t){return n("CmsBlock",{key:t.id,staticClass:"page-block theme-block",attrs:{value:t,data:e.pageModel,vm:e.vm},on:{"update:data":[function(t){e.pageModel=t},e.onUpdateData],"ref:mounted":e.onRefMounted,"ref:destroyed":e.onRefDestroyed}})})),1)})),0)})),0)})),0)])},o=[],i=n("2909"),a=n("1da1"),c=(n("159b"),n("a15b"),n("d81d"),n("ac1f"),n("1276"),n("b0c0"),n("96cf"),n("b29e"),n("108b"),n("5530")),s=n("53ca"),u=n("d4ec"),l=n("bee2");n("d3b7"),n("ddb0"),n("5319");function d(e,t){if(e&&t){var n=t,r=e;n=n.replace(/\[(\w+)\]/g,".$1"),n=n.replace(/^\./,"");for(var o=n.split("."),i=0,a=o.length;i<a;++i){if(null===r)return;var c=o[i];if("undefined"==typeof r[c])return;r=r[c]}return r}}n("498a"),n("4d63"),n("25f0");function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return e;if("{{}}"==e)return t;if(Array.isArray(e))return e.map((function(e){return p(e,t,n)}));if("object"===Object(s["a"])(e)){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=p(e[o],t,n));return r}if("string"===typeof e){var i,a=/{{(.+?)}}/g,c={};do{if(i=a.exec(e),i&&!(i[0]in c)){var u=i[1].trim(),l=u.split("?",2);if(2==l.length){var f=d(t,l[0].trim());"0"==f&&(f=!1);var m=f?0:1,h=l[1].split(":",2),b=h[m].trim();b="'"==b[0]?b.substr(1,b.length-2):d(t,b),c[i[0]]=b;continue}var v=d(t,u);if(void 0===v){if(n)continue;v=""}e!=i[0]&&"object"==Object(s["a"])(v)&&(v=JSON.stringify(v,null,2)),c[i[0]]=v}}while(i);var g=e;for(var k in c){if(e==k)return c[k];var y=k.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");g=g.replace(new RegExp(y,"g"),c[k])}return g}return e}var f=p,m={echo:function(e){return e},"console.log":function(e){return console.log(e)},"window.alert":function(e){return e&&"undefined"!=typeof e.message&&(e=e.message),window.alert(e)},"window.confirm":function(e){return e&&"undefined"!=typeof e.message&&(e=e.message),window.confirm(e)},"window.prompt":function(e){var t=e.message,n=e.placeholder;return window.prompt(t,n)},fetch:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e.url,n=e.options;return n&&n.body&&"string"!=typeof n.body&&(n.body=JSON.stringify(n.body)),fetch(t,n).then((function(e){return e.json()}))}))},h=(n("99af"),n("caad"),n("2532"),{eq:function(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!=t.length)return!1;var n=e.concat().sort(),r=t.concat().sort();return n.every((function(e,t){return e==r[t]}))}return e==t},neq:function(e,t){return e!=t},contains:function(e,t){return Array.isArray(t)?t.includes(e):-1!==e.indexOf(t)},beginsWith:function(e,t){return 0===e.indexOf(t)},endsWith:function(e,t){return e.indexOf(t)===e.length-t.length},gt:function(e,t){return parseFloat(e)>parseFloat(t)},gte:function(e,t){return parseFloat(e)>=parseFloat(t)},lt:function(e,t){return parseFloat(e)<parseFloat(t)},lte:function(e,t){return parseFloat(e)<=parseFloat(t)},between:function(e,t){return parseFloat(t[0])<=parseFloat(e)&&parseFloat(e)<=parseFloat(t[1])},hasElement:function(e,t){var n=Array.isArray(e)?e:[e];return n.includes(t)},hasAny:function(e,t){for(var n=Array.isArray(e)?e:[e],r=0;r<t.length;r++)if(n.includes(t[r]))return!0;return!1},hasAll:function(e,t){for(var n=0;n<t.length;n++)if(!e.includes(t[n]))return!1;return!0},empty:function(e){if(Array.isArray(e))return!e.length;if("object"==Object(s["a"])(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}return!e||!e.trim()},nempty:function(e,t){return!h.empty(e,t)}}),b=h,v={"array.map":function(e,t){var n=arguments,r=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var i,a,c,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=n.length>2&&void 0!==n[2]?n[2]:null,Array.isArray(e)){o.next=3;break}return o.abrupt("return",[]);case 3:a=[],c=0;case 5:if(!(c<e.length)){o.next=13;break}return o.next=8,r.runClosure(t,[e[c],c],i);case 8:s=o.sent,a.push(s);case 10:c++,o.next=5;break;case 13:return o.abrupt("return",a);case 14:case"end":return o.stop()}}),o)})))()},"array.filter":function(e,t){var n=arguments,r=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var i,a,c,s,u;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=n.length>2&&void 0!==n[2]?n[2]:null,Array.isArray(e)){o.next=3;break}return o.abrupt("return",[]);case 3:a=[],c=0;case 5:if(!(c<e.length)){o.next=14;break}return s=e[c],o.next=9,r.runClosure(t,[s,c],i);case 9:u=o.sent,u&&a.push(s);case 11:c++,o.next=5;break;case 14:return o.abrupt("return",a);case 15:case"end":return o.stop()}}),o)})))()},"array.eq":function(e,t){if(e.length!=t.length)return!1;var n=e.concat().sort(),r=t.concat().sort();return n.every((function(e,t){return e==r[t]}))},"array.includes":function(e,t){return e.includes(t)},"array.hasAny":function(e,t){for(var n=0;n<t.length;n++)if(e.includes(t[n]))return!0;return!1},"array.hasAll":function(e,t){for(var n=0;n<t.length;n++)if(!e.includes(t[n]))return!1;return!0},"array.empty":function(e){return 0==e.length},"array.nempty":function(e){return e.length>0}},g={"boolean.true":function(e){return!!e},"boolean.false":function(e){return!e}},k={"date.eq":function(e,t){return e==t},"date.neq":function(e,t){return e!=t},"date.gt":function(e,t){return e>t},"date.gte":function(e,t){return e>=t},"date.lt":function(e,t){return e<t},"date.lte":function(e,t){return e<=t},"date.between":function(e,t){return t[0]<=e&&e<=t[1]}},y={"number.eq":function(e,t){return e==t},"number.neq":function(e,t){return e!=t},"number.gt":function(e,t){return e>t},"number.gte":function(e,t){return e>=t},"number.lt":function(e,t){return e<t},"number.lte":function(e,t){return e<=t},"number.between":function(e,t){return t[0]<=e&&e<=t[1]}};function x(e){return e?e.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]/g,""):""}var w={"string.same":function(e,t){return x(e)==x(t)},"string.like":function(e,t){return x(e)==x(t)},"string.eq":function(e,t){return e==t},"string.neq":function(e,t){return e!=t},"string.contains":function(e,t){return-1!==e.indexOf(t)},"string.beginsWith":function(e,t){return 0===e.indexOf(t)},"string.endsWith":function(e,t){return e.indexOf(t)===e.length-t.length},"string.empty":function(e){return!e||!e.trim()},"string.nempty":function(e){return e&&!!e.trim()}},C=Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])({},b),v),g),k),y),w),O=function(){function e(){Object(u["a"])(this,e),this.functions=Object.assign({},m),this.operators=Object.assign({},C),this.onModelSet=null}return Object(l["a"])(e,[{key:"eval",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,c,u,l,d,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:null,t&&("string"==typeof t||"object"==Object(s["a"])(t))){e.next=3;break}return e.abrupt("return",t);case 3:if("string"!=typeof t){e.next=5;break}return e.abrupt("return",f(t,n));case 5:if(!Array.isArray(t)){e.next=16;break}r=[],o=0;case 8:if(!(o<t.length)){e.next=15;break}return e.next=11,this.eval(t[o],n);case 11:r[o]=e.sent;case 12:o++,e.next=8;break;case 15:return e.abrupt("return",r);case 16:if(!t.function){e.next=18;break}return e.abrupt("return",t);case 18:if(!t.call){e.next=20;break}return e.abrupt("return",this.stmtCall(t.call,t.args,n));case 20:if(!Array.isArray(t.chain)){e.next=22;break}return e.abrupt("return",this.stmtChain(t.chain,n));case 22:if(!t.op){e.next=24;break}return e.abrupt("return",this.stmtOperator(t.op,t.field,t.args,n));case 24:if(!t.if){e.next=26;break}return e.abrupt("return",this.stmtIf(t.if,t.then,t.else,n));case 26:if(!t.switch){e.next=28;break}return e.abrupt("return",this.stmtSwitch(t.switch,t.case,t.default,n));case 28:if(!t.not){e.next=32;break}return e.next=31,this.eval(t.not,n);case 31:return e.abrupt("return",!e.sent);case 32:if(!Array.isArray(t.or)){e.next=44;break}i=t.or,a=0;case 35:if(!(a<i.length)){e.next=43;break}return e.next=38,this.eval(i[a],n);case 38:if(!e.sent){e.next=40;break}return e.abrupt("return",!0);case 40:a++,e.next=35;break;case 43:return e.abrupt("return",!1);case 44:if(!Array.isArray(t.and)){e.next=56;break}c=t.and,u=0;case 47:if(!(u<c.length)){e.next=55;break}return e.next=50,this.eval(c[u],n);case 50:if(e.sent){e.next=52;break}return e.abrupt("return",!1);case 52:u++,e.next=47;break;case 55:return e.abrupt("return",!0);case 56:l={},e.t0=regeneratorRuntime.keys(t);case 58:if((e.t1=e.t0()).done){e.next=67;break}if(d=e.t1.value,Object.prototype.hasOwnProperty.call(t,d)){e.next=62;break}return e.abrupt("continue",58);case 62:return e.next=64,this.eval(t[d],n);case 64:l[d]=e.sent,e.next=58;break;case 67:return e.abrupt("return",l);case 68:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stmtOperator",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:null,r=c.length>2&&void 0!==c[2]?c[2]:null,o=c.length>3&&void 0!==c[3]?c[3]:null,"undefined"!=typeof this.operators[t]){e.next=5;break}throw"undefined operator '".concat(t,"'");case 5:return i=d(o,n),e.next=8,this.eval(r,o);case 8:return a=e.sent,e.next=11,this.operators[t].bind(this)(i,a,o);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stmtCall",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:null,r=i.length>2&&void 0!==i[2]?i[2]:null,"undefined"!=typeof this.functions[t]){e.next=4;break}throw"undefined function '".concat(t,"'");case 4:if(!n){e.next=10;break}return e.next=7,this.eval(n,r);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=null;case 11:return o=e.t0,e.next=14,this.functions[t].bind(this)(o,r);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stmtIf",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r,o,i,a,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:null,o=c.length>3&&void 0!==c[3]?c[3]:null,i=null,e.next=5,this.eval(t,o);case 5:if(a=e.sent,!a){e.next=12;break}return e.next=9,this.eval(n,o);case 9:i=e.sent,e.next=16;break;case 12:if(!r){e.next=16;break}return e.next=15,this.eval(r,o);case 15:i=e.sent;case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"stmtSwitch",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:[],r=c.length>2&&void 0!==c[2]?c[2]:null,o=c.length>3&&void 0!==c[3]?c[3]:null,e.next=5,this.eval(t,o);case 5:i=e.sent,a=0;case 7:if(!(a<n.length)){e.next=15;break}if(n[a].value!=i){e.next=12;break}return e.next=11,this.eval(n[a].do,o);case 11:return e.abrupt("return",e.sent);case 12:a++,e.next=7;break;case 15:if(!r){e.next=19;break}return e.next=18,this.eval(r,o);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stmtChain",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o,i,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:[],n=a.length>1&&void 0!==a[1]?a[1]:null,t.length){e.next=4;break}return e.abrupt("return");case 4:o=0;case 5:if(!(o<t.length)){e.next=16;break}if(i=t[o],i.do){e.next=9;break}return e.abrupt("continue",13);case 9:return e.next=11,this.eval(i.do,n);case 11:r=e.sent,i.assign&&this.onModelSet&&this.onModelSet(i.assign,r);case 13:o++,e.next=5;break;case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"runClosure",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Array.isArray(t))throw"invalid arguments in function call";if(!e.function)throw"invalid function";var r={};if(Array.isArray(e.arguments))for(var o=0;o<e.arguments.length;o++){var i=e.arguments[o];"undefined"!=typeof t[o]&&(r[i]=t[o])}return this.eval(e.function,Object(c["a"])(Object(c["a"])({},n),r))}}]),e}(),j=n("40f1"),S=(n("161b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.renderedBlocks.length?n("div",{staticClass:"cms-block"},e._l(e.renderedBlocks,(function(t,r){return n("CmsBlockComponent",e._g(e._b({key:r,attrs:{"component-class":t.props.class,name:t.component},on:{"block:mounted":e.onBlockMounted,"hook:mounted":function(n){return e.onHookMounted(t)},"hook:destroyed":function(n){return e.onHookDetroyed(t)}}},"CmsBlockComponent",t.props,!1),t.listeners))})),1):e._e()}),I=[],_=n("e42c"),R=n("2048"),A={name:"CmsBlock",mixins:[_["a"]],components:{CmsBlockComponent:R["a"]},inject:{cmsSettings:{default:null}},props:{value:{type:Object,required:!0},data:{type:Object,required:!1,default:function(){return{}}},vm:{type:Object,required:!0},showHidden:{type:Boolean,required:!1,default:!1}},data:function(){return{definition:null,renderedBlocks:[]}},watch:{value:{immediate:!0,deep:!0,handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.$cms.getDefinition(e);case 4:t.definition=n.sent,t.computeVisibility();case 6:case"end":return n.stop()}}),n)})))()}},data:{deep:!0,handler:function(){this.computeVisibility()}}},computed:{eventListeners:function(){var e=this,t={};if(this.value["v-model"]&&(t.input=function(t){return e.setVariable(e.value["v-model"],t)}),!this.value["v-on"])return t;var n=function(n){if(!Object.prototype.hasOwnProperty.call(e.value["v-on"],n))return"continue";t[n]=function(t){return e.onBlockEvent(n,t,e.value["v-on"][n])}};for(var r in this.value["v-on"])n(r);return t}},methods:{onBlockMounted:function(e){this.value.ref&&this.$emit("ref:mounted",{name:this.value.ref,component:e})},onHookMounted:function(e){e.mounted&&this.onBlockEvent("mounted",null,e.mounted)},onHookDetroyed:function(e){e.destroyed&&this.onBlockEvent("destroyed",null,e.destroyed),this.value.ref&&this.$emit("ref:destroyed",{name:this.value.ref})},computeVisibility:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,o,i,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.value&&e.definition){t.next=3;break}return e.renderedBlocks=[],t.abrupt("return");case 3:if(!e.value.props){t.next=9;break}return t.next=6,e.vm.eval(e.value.props,e.data);case 6:t.t0=t.sent,t.next=10;break;case 9:t.t0=null;case 10:if(n=t.t0,r=!0,!e.value["v-if"]){t.next=22;break}return t.prev=13,t.next=16,e.vm.eval(e.value["v-if"],e.data);case 16:r=t.sent,t.next=22;break;case 19:t.prev=19,t.t1=t["catch"](13),r=!1;case 22:if(r){t.next=25;break}return e.renderedBlocks=[],t.abrupt("return");case 25:if(o=[null],!e.value["v-for"]){t.next=31;break}if(o=e.getVariable(e.value["v-for"]),Array.isArray(o)){t.next=31;break}return console.warn("Invalid 'v-for'",e.value),t.abrupt("return");case 31:for(i=[],a=0;a<o.length;a++)e.value["v-model"]&&(n=Object.assign({},n,{value:e.getVariable(e.value["v-model"])})),c=Object.assign({},e.value,{component:e.definition.block.component,props:n,listeners:e.eventListeners}),i[a]=c;e.renderedBlocks=i;case 34:case"end":return t.stop()}}),t,null,[[13,19]])})))()},onBlockEvent:function(e,t,n){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,i=Object.assign({},r.data,{$event:t}),o.next=4,r.vm.eval(n,i);case 4:o.next=10;break;case 6:return o.prev=6,o.t0=o["catch"](0),console.error("Block.vue@onBlockEvent",e,o.t0),o.abrupt("return",null);case 10:case"end":return o.stop()}}),o,null,[[0,6]])})))()},getVariable:function(e){return Object(j["b"])(this.data,e)},setVariable:function(e,t){for(var n=this.data,r=e.split("."),o=r.length,i=0;i<o-1;i++)"undefined"!=typeof n[r[i]]&&n[r[i]]||this.$set(n,r[i],{}),n=n[r[i]];this.$set(n,r[o-1],t),this.$emit("update:data",this.data)}}},E=A,P=(n("3137"),n("2877")),$=Object(P["a"])(E,S,I,!1,null,null,null),U=$.exports,T={name:"CmsPage",components:{CmsBlock:U},props:{value:{type:Object,required:!1,default:null},model:{type:Object,required:!1,default:function(){return{}}}},data:function(){return{blockRefs:{},pageModel:{},watchers:[],vm:null}},watch:{value:{immediate:!0,handler:function(){this.setupWatchers()}},model:{immediate:!0,deep:!0,handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.pageModel=JSON.parse(JSON.stringify(e));case 1:case"end":return n.stop()}}),n)})))()}}},beforeMount:function(){var e=this;this.vm=new O,this.vm.onModelSet=function(t,n){return e.setVariable(t,n)},this.vm.functions.refAction=function(t){if(t&&t.ref&&t.method&&e.blockRefs[t.ref]){var n=e.blockRefs[t.ref];if(n[t.method]){var r=Array.isArray(t.arguments)?t.arguments:[];return n[t.method].apply(n,Object(i["a"])(r))}}},this.runSetup()},methods:{runSetup:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.value&&e.value.setup){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.vm.eval(e.value.setup,e.pageModel);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))()},setupWatchers:function(){var e=this;this.watchers.forEach((function(e){return e()})),this.value&&this.value.watch&&Array.isArray(this.value.watch)&&this.value.watch.forEach((function(t,n){var r=Array.isArray(t.target)?t.target:[t.target];e.watchers[n]=e.$watch((function(){return r.map((function(t){return Object(j["b"])(e.pageModel,t)})).join()}),Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.expr){e.next=9;break}return e.prev=1,e.next=4,this.vm.eval(t.expr,this.pageModel);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),console.warn("Page.vue@watcher.vm",e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])}))),{immediate:t.immediate})}))},setVariable:function(e,t){for(var n=this.pageModel,r=e.split("."),o=r.length,i=0;i<o-1;i++)"undefined"!=typeof n[r[i]]&&n[r[i]]||this.$set(n,r[i],{}),n=n[r[i]];this.$set(n,r[o-1],t),this.onUpdateData()},onUpdateData:function(){this.$emit("update:model",JSON.parse(JSON.stringify(this.pageModel)))},onRefMounted:function(e){this.blockRefs[e.name]=e.component},onRefDestroyed:function(e){this.blockRefs[e.name]=void 0}}},D=T,M=(n("b925"),Object(P["a"])(D,r,o,!1,null,null,null));t["a"]=M.exports},e094:function(e,t,n){"use strict";n("efe9")},e42c:function(e,t,n){"use strict";var r=n("8d57");t["a"]={computed:{$cms:function(){return r["a"]}}}},e58d:function(e,t,n){"use strict";n("5903")},efe9:function(e,t,n){},f24c:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"BlockListenersEditor"},[e._l(e.events,(function(t){return n("div",{key:t.name},[n("UiDrawer",{scopedSlots:e._u([{key:"trigger",fn:function(){return[n("UiItem",{staticClass:"ui-clickable",attrs:{icon:"mdi:bell-ring",text:t.name},scopedSlots:e._u([{key:"right",fn:function(){return[n("UiIcon",{staticClass:"ui-clickable",attrs:{value:"mdi:close"},nativeOn:{mousedown:function(n){return n.stopPropagation(),e.removeEvent(t.name)}}})]},proxy:!0}],null,!0)})]},proxy:!0},{key:"contents",fn:function(){return[n("div",{staticClass:"listener-contents"},[n("VmExpression",{attrs:{schema:e.CmsPageRoot.schema,value:t.expression},on:{input:function(n){return e.updateEvent(t.name,n)}}})],1)]},proxy:!0}],null,!0)})],1)})),n("input",{staticClass:"ui-native",attrs:{type:"text",placeholder:"Agregar evento"},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.addEvent(t.target.value),t.target.value=""}}})],2)},o=[],i=(n("159b"),n("b64b"),n("498a"),n("108b")),a=n("fa30"),c={name:"BlockListenersEditor",inject:["CmsPageRoot"],components:{VmExpression:i["a"],UiItem:a["q"],UiDrawer:a["e"],UiIcon:a["m"]},props:{value:{type:Object,required:!1,default:null}},data:function(){return{innerValue:null}},watch:{value:{immediate:!0,handler:function(e){this.innerValue=this.sanitizeValue(e)}}},computed:{events:function(){var e=this,t=[];return Object.keys(this.innerValue).forEach((function(n){t.push({name:n,expression:e.innerValue[n]})})),t}},methods:{sanitizeValue:function(e){return e?JSON.parse(JSON.stringify(e)):{}},emitInput:function(){this.$emit("input",JSON.parse(JSON.stringify(this.innerValue)))},addEvent:function(e){var t=e.trim();t&&"undefined"==typeof this.innerValue[t]&&(this.$set(this.innerValue,t,{chain:[]}),this.emitInput())},updateEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.trim();n&&(this.$set(this.innerValue,n,t),this.emitInput())},removeEvent:function(e){confirm("Eliminar este evento ?")&&(this.$delete(this.innerValue,e),this.emitInput())}}},s=c,u=(n("e094"),n("2877")),l=Object(u["a"])(s,r,o,!1,null,null,null);t["a"]=l.exports}});