{"version":3,"sources":["webpack:///./packages/cms/plugins/core/components/CmsDialog/CmsDialog.vue?1250","webpack:///./packages/cms/api/index.js","webpack:///./packages/cms/plugins/core/components/CmsDialog/CmsDialog.vue?1334","webpack:///packages/cms/plugins/core/components/CmsDialog/CmsDialog.vue","webpack:///./packages/cms/plugins/core/components/CmsDialog/CmsDialog.vue","webpack:///./packages/cms/plugins/core/components/CmsDialog/CmsDialog.vue?06bf"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","onDialogOpen","scopedSlots","_u","key","fn","attrs","text","secondary","icon","badgeColor","proxy","page","innerModel","$event","_e","ref","close","$emit","_v","staticRenderFns","pageCache","httpClient","baseURL","getPage","pageId","get","getDraft","saveDraft","pageData","undefined","put","publish","getUrlDetails","url","uploadBlob","fileName","blob","formData","FormData","append","post","obtainRecord","personId","updateRecord","recordData","name","mixins","components","$api","props","type","String","required","model","Object","default","data","watch","immediate","handler","JSON","parse","stringify","newValue","methods","fetchPage","component"],"mappings":"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","file":"js/chunk-16633eae.8df0470b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"CmsDialog\"},[_c('UiDialog',{on:{\"open\":_vm.onDialogOpen},scopedSlots:_vm._u([{key:\"trigger\",fn:function(){return [_c('UiItem',{staticClass:\"ui-clickable\",attrs:{\"text\":_vm.text,\"secondary\":_vm.secondary,\"icon\":_vm.icon,\"badgeColor\":_vm.badgeColor,\"badge\":_vm.badgeColor ? ' ' : null}})]},proxy:true},{key:\"contents\",fn:function(){return [(_vm.page)?_c('CmsPage',{attrs:{\"value\":_vm.page,\"model\":_vm.innerModel},on:{\"update:model\":function($event){_vm.innerModel=$event}}}):_vm._e()]},proxy:true},{key:\"footer\",fn:function(ref){\nvar close = ref.close;\nreturn [_c('button',{staticClass:\"ui-button --main\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.$emit('accept', _vm.innerModel); close();}}},[_vm._v(\"Aceptar\")]),_c('button',{staticClass:\"ui-button --cancel\",attrs:{\"type\":\"button\"},on:{\"click\":close}},[_vm._v(\"Cancelar\")])]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var pageCache = {};\r\n\r\nexport default (httpClient) => {\r\n\r\n  httpClient.baseURL = 'http://v4.local/'; // !!!\r\n\r\n  return {\r\n    getPage(pageId) {\r\n      if (typeof pageCache[pageId] == 'undefined') {\r\n        pageCache[pageId] = httpClient.get(`/1/cms/pages/${pageId}`);\r\n      }\r\n\r\n      return pageCache[pageId];\r\n    },\r\n\r\n    getDraft(pageId) {\r\n      return httpClient.get(`/1/cms/pages/${pageId}/draft`);\r\n    },\r\n\r\n    saveDraft(pageId, pageData) {\r\n      pageCache[pageId] = undefined;\r\n      return httpClient.put(`/1/cms/pages/${pageId}/draft`, pageData);\r\n    },\r\n\r\n    publish(pageId, pageData = null) {\r\n      return httpClient.put(`/1/cms/pages/${pageId}/publish`, pageData);\r\n    },\r\n\r\n    getUrlDetails(url) {\r\n      return httpClient.get(`/1/proxy/url/details`, { url });\r\n    },\r\n\r\n    uploadBlob(pageId, fileName, blob) {\r\n      let formData = new FormData();\r\n      formData.append('files', blob, fileName);\r\n\r\n      return httpClient.post(`/1/cms/pages/${pageId}/files`, formData);\r\n    },\r\n\r\n    // Registro unico por aca persona-p√°gina\r\n    obtainRecord(pageId, personId) {\r\n      return httpClient.get(`/1/cms/people/${personId}/pages/${pageId}/record`);\r\n    },\r\n\r\n    updateRecord(pageId, personId, recordData) {\r\n      return httpClient.put(`/1/cms/people/${personId}/pages/${pageId}/record`, recordData);\r\n    },\r\n\r\n  }\r\n};","export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"08dfcdae-vue-loader-template\\\"}!../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CmsDialog.vue?vue&type=template&id=636b6502&\"","<template>\r\n  <div class=\"CmsDialog\">\r\n    <UiDialog @open=\"onDialogOpen\">\r\n      <template #trigger>\r\n        <UiItem\r\n          class=\"ui-clickable\"\r\n          :text=\"text\"\r\n          :secondary=\"secondary\"\r\n          :icon=\"icon\"\r\n          :badgeColor=\"badgeColor\"\r\n          :badge=\"badgeColor ? ' ' : null\"\r\n        />\r\n      </template>\r\n\r\n      <template #contents>\r\n        <CmsPage\r\n          v-if=\"page\"\r\n          :value=\"page\"\r\n          :model.sync=\"innerModel\"\r\n        />\r\n      </template>\r\n\r\n      <template #footer=\"{close}\">\r\n        <button\r\n          type=\"button\"\r\n          class=\"ui-button --main\"\r\n          @click=\"$emit('accept', innerModel); close();\"\r\n        >Aceptar</button>\r\n        <button\r\n          type=\"button\"\r\n          class=\"ui-button --cancel\"\r\n          @click=\"close\"\r\n        >Cancelar</button>\r\n      </template>\r\n\r\n    </UiDialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useApi } from '/packages/api';\r\nimport { UiItem, UiDialog } from '/packages/ui';\r\nimport CmsPage from '../../../../components/CmsPage/CmsPage.vue';\r\n// import pageRegistro from '/src/pages/covid-registro.js';\r\n\r\nimport apiCms from '../../../../api/index.js';\r\n\r\nexport default {\r\n  name: 'CmsDialog',\r\n  mixins: [useApi],\r\n  components: { UiItem, UiDialog, CmsPage },\r\n\r\n  $api: apiCms,\r\n\r\n  props: {\r\n    pageId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n\r\n    model: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n\r\n    text: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n\r\n    secondary: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n\r\n    badgeColor: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n\r\n    icon: {\r\n      type: String,\r\n      required: false,\r\n      default: 'mdi:dock-window',\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      page: null,\r\n      innerModel: {},\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    model: {\r\n      immediate: true,\r\n      handler(newValue) {\r\n        this.innerModel = JSON.parse(JSON.stringify(newValue));\r\n      },\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    async fetchPage() {\r\n      // this.page = await this.$api.getPage(this.pageId);\r\n      this.page = await this.$api.getDraft(this.pageId);\r\n    },\r\n\r\n    onDialogOpen() {\r\n      this.fetchPage();\r\n    },\r\n  },\r\n};\r\n</script>","import { render, staticRenderFns } from \"./CmsDialog.vue?vue&type=template&id=636b6502&\"\nimport script from \"./CmsDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./CmsDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CmsDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CmsDialog.vue?vue&type=script&lang=js&\""],"sourceRoot":""}