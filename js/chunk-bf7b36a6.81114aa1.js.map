{"version":3,"sources":["webpack:///./packages/vm/components/VmExpression/statements/op/StmtOp.vue","webpack:///./packages/vm/components/VmExpression/statements/op/StmtOp.vue?c452","webpack:///./packages/vm/components/VmExpression/statements/op/StmtOp.vue?6d74","webpack:///packages/vm/components/VmExpression/statements/op/StmtOp.vue","webpack:///./packages/vm/components/VmExpression/statements/op/StmtOp.vue?e544","webpack:///./packages/vm/components/VmExpression/statements/op/StmtOp.vue?7785"],"names":["component","name","inject","components","props","value","required","default","data","innerModel","watch","immediate","handler","this","Object","assign","computed","fieldSchema","field","isKnownOperator","customArgsComponent","enum","type","multiple","options","VmExpressionRoot","schema","properties","operators","op","editor","methods","onChangeOp","args","emitInput","$nextTick","$emit","JSON","parse","stringify","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","_b","directives","rawName","expression","attrs","domProps","on","$event","target","composing","$set","$$selectedVal","Array","prototype","filter","call","o","selected","map","val","_value","_l","opDef","opName","key","_v","_s","text","tag","model","callback","$$v","staticRenderFns"],"mappings":"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","file":"js/chunk-bf7b36a6.81114aa1.js","sourcesContent":["import { render, staticRenderFns } from \"./StmtOp.vue?vue&type=template&id=069e12f6&\"\nimport script from \"./StmtOp.vue?vue&type=script&lang=js&\"\nexport * from \"./StmtOp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StmtOp.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StmtOp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StmtOp.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"08dfcdae-vue-loader-template\\\"}!../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StmtOp.vue?vue&type=template&id=069e12f6&\"","<template>\r\n  <div class=\"StmtOp\">\r\n\r\n    <div class=\"ui-row --top\">\r\n      <div style=\"flex:3\">\r\n        <UiItem\r\n          v-if=\"fieldSchema\"\r\n          v-bind=\"fieldSchema\"\r\n        />\r\n        <input\r\n          v-else\r\n          type=\"text\"\r\n          class=\"ui-native op-field-input\"\r\n          v-model=\"innerModel.field\"\r\n          @input=\"emitInput\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        class=\"op-picker\"\r\n        style=\"flex:3\"\r\n      >\r\n        <select\r\n          class=\"op-picker-select\"\r\n          v-model=\"innerModel.op\"\r\n          @change=\"emitInput(); onChangeOp();\"\r\n        >\r\n          <option\r\n            v-for=\"(opDef, opName) in VmExpressionRoot.operators\"\r\n            :key=\"opName\"\r\n            :value=\"opName\"\r\n          >{{ opDef.text }}</option>\r\n\r\n          <option\r\n            v-if=\"!isKnownOperator\"\r\n            :value=\"innerModel.op\"\r\n          >Otro:</option>\r\n          <option\r\n            v-else\r\n            :value=\"null\"\r\n          >-- Custom --</option>\r\n        </select>\r\n\r\n        <input\r\n          v-show=\"!isKnownOperator\"\r\n          type=\"text\"\r\n          class=\"ui-native op-option-other\"\r\n          v-model=\"innerModel.op\"\r\n          @input=\"emitInput\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        class=\"op-args\"\r\n        style=\"flex:4\"\r\n      >\r\n        <component\r\n          v-if=\"customArgsComponent\"\r\n          :is=\"customArgsComponent.component\"\r\n          v-bind=\"customArgsComponent.props\"\r\n          v-model=\"innerModel.args\"\r\n          @input=\"emitInput\"\r\n        ></component>\r\n        <VmExpressionInternal\r\n          v-else\r\n          v-model=\"innerModel.args\"\r\n          @input=\"emitInput\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <!--\r\n    <UiField\r\n      v-if=\"innerModel.field\"\r\n      label=\"field\"\r\n    >\r\n      <input\r\n        type=\"text\"\r\n        class=\"ui-native\"\r\n        v-model=\"innerModel.field\"\r\n        @input=\"emitInput\"\r\n      />\r\n    </UiField>\r\n    <UiField\r\n      v-else\r\n      label=\"arg1\"\r\n    >\r\n      <VmExpressionInternal\r\n        v-model=\"innerModel.arg1\"\r\n        @input=\"emitInput\"\r\n      />\r\n    </UiField>\r\n\r\n    <UiField label=\"arg2\">\r\n      <VmExpressionInternal\r\n        v-model=\"innerModel.arg2\"\r\n        @input=\"emitInput\"\r\n      />\r\n    </UiField> -->\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { UiInput, UiItem } from '../../../../../ui/components';\r\nimport VmExpressionInternal from '../../VmExpressionInternal.vue';\r\n\r\nexport default {\r\n  name: 'StmtOp',\r\n  inject: ['VmExpressionRoot'],\r\n  components: { UiItem, VmExpressionInternal },\r\n\r\n  props: {\r\n    value: {\r\n      required: false,\r\n      default: null,\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      innerModel: null,\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    value: {\r\n      immediate: true,\r\n      handler(newValue) {\r\n        let clone = newValue ? JSON.parse(JSON.stringify(newValue)) : newValue;\r\n\r\n        this.innerModel = Object.assign(\r\n          {\r\n            op: null,\r\n            arg1: clone.arg1 || (clone.field ? `{{ ${clone.field} }}` : null),\r\n            arg2: clone.arg2 || clone.args,\r\n            field: null,\r\n            args: clone.args,\r\n          },\r\n          clone\r\n        );\r\n      },\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    fieldSchema() {\r\n      if (!this.innerModel.field) {\r\n        return null;\r\n      }\r\n\r\n      return (\r\n        this.VmExpressionRoot.schema &&\r\n        this.VmExpressionRoot.schema.properties[this.innerModel.field]\r\n      );\r\n    },\r\n\r\n    isKnownOperator() {\r\n      return (\r\n        typeof this.VmExpressionRoot.operators[this.innerModel.op] !=\r\n        'undefined'\r\n      );\r\n    },\r\n\r\n    customArgsComponent() {\r\n      // Si hay un esquema con ENUM, mostrar simplemente un picker\r\n      if (this.fieldSchema && this.fieldSchema.enum) {\r\n        return {\r\n          component: UiInput,\r\n          props: {\r\n            type: 'select',\r\n            multiple: false,\r\n            options: this.VmExpressionRoot.schema.properties[\r\n              this.innerModel.field\r\n            ].enum,\r\n          },\r\n        };\r\n      }\r\n\r\n      if (\r\n        typeof this.VmExpressionRoot.operators[this.innerModel.op] !=\r\n          'undefined' &&\r\n        this.VmExpressionRoot.operators[this.innerModel.op].editor\r\n      ) {\r\n        return this.VmExpressionRoot.operators[this.innerModel.op].editor;\r\n      }\r\n\r\n      return null;\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    onChangeOp() {\r\n      this.innerModel.args = null;\r\n      this.emitInput();\r\n\r\n      // Focus \"custom\" textarea\r\n      if (!this.innerModel.op) {\r\n        try {\r\n          this.$nextTick(() =>\r\n            this.$el.querySelector('input.op-option-other').focus()\r\n          );\r\n        } catch (e) {\r\n          // shhh\r\n        }\r\n      }\r\n    },\r\n\r\n    emitInput() {\r\n      this.$emit('input', JSON.parse(JSON.stringify(this.innerModel)));\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.StmtOp {\r\n  .op-picker {\r\n    text-align: center;\r\n  }\r\n\r\n  .op-picker-select {\r\n    padding: var(--ui-padding);\r\n    border: 0;\r\n    background: transparent;\r\n    font-family: var(--ui-font-secondary);\r\n    font-weight: bold;\r\n  }\r\n}\r\n</style>","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StmtOp.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"StmtOp\"},[_c('div',{staticClass:\"ui-row --top\"},[_c('div',{staticStyle:{\"flex\":\"3\"}},[(_vm.fieldSchema)?_c('UiItem',_vm._b({},'UiItem',_vm.fieldSchema,false)):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.innerModel.field),expression:\"innerModel.field\"}],staticClass:\"ui-native op-field-input\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.innerModel.field)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.innerModel, \"field\", $event.target.value)},_vm.emitInput]}})],1),_c('div',{staticClass:\"op-picker\",staticStyle:{\"flex\":\"3\"}},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.innerModel.op),expression:\"innerModel.op\"}],staticClass:\"op-picker-select\",on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.innerModel, \"op\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])},function($event){_vm.emitInput(); _vm.onChangeOp();}]}},[_vm._l((_vm.VmExpressionRoot.operators),function(opDef,opName){return _c('option',{key:opName,domProps:{\"value\":opName}},[_vm._v(_vm._s(opDef.text))])}),(!_vm.isKnownOperator)?_c('option',{domProps:{\"value\":_vm.innerModel.op}},[_vm._v(\"Otro:\")]):_c('option',{domProps:{\"value\":null}},[_vm._v(\"-- Custom --\")])],2),_c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isKnownOperator),expression:\"!isKnownOperator\"},{name:\"model\",rawName:\"v-model\",value:(_vm.innerModel.op),expression:\"innerModel.op\"}],staticClass:\"ui-native op-option-other\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.innerModel.op)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.innerModel, \"op\", $event.target.value)},_vm.emitInput]}})]),_c('div',{staticClass:\"op-args\",staticStyle:{\"flex\":\"4\"}},[(_vm.customArgsComponent)?_c(_vm.customArgsComponent.component,_vm._b({tag:\"component\",on:{\"input\":_vm.emitInput},model:{value:(_vm.innerModel.args),callback:function ($$v) {_vm.$set(_vm.innerModel, \"args\", $$v)},expression:\"innerModel.args\"}},'component',_vm.customArgsComponent.props,false)):_c('VmExpressionInternal',{on:{\"input\":_vm.emitInput},model:{value:(_vm.innerModel.args),callback:function ($$v) {_vm.$set(_vm.innerModel, \"args\", $$v)},expression:\"innerModel.args\"}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}